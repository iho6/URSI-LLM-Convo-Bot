{"version":3,"file":"index.browser.min.js","sources":["../src/index.ts"],"sourcesContent":["import { JsPsych, JsPsychExtension, JsPsychExtensionInfo } from \"jspsych\";\n\nclass DeviceMotionExtension implements JsPsychExtension {\n  static info: JsPsychExtensionInfo = {\n    name: \"device-motion-tracking\",\n  };\n\n  constructor(private jsPsych: JsPsych) {}\n\n  private currentTrialData: Array<object>;\n  private currentTrialStartTime: number;\n\n  initialize = async () => {};\n\n  on_start = (): void => {\n    this.currentTrialData = [];\n  };\n\n  on_load = () => {\n    // set current trial start time\n    this.currentTrialStartTime = performance.now();\n\n    // start data collection\n    window.addEventListener(\"devicemotion\", this.deviceMotionEventHandler, true);\n  };\n\n  on_finish = () => {\n    window.removeEventListener(\"devicemotion\", this.deviceMotionEventHandler, true);\n\n    return {\n      device_motion_data: this.currentTrialData,\n    };\n  };\n\n  private deviceMotionEventHandler = (eventA) => {\n    const event_time = performance.now();\n    const t = Math.round(event_time - this.currentTrialStartTime);\n\n    const { x, y, z } = eventA.acceleration;\n    const interval = eventA.interval; //gets interval between samples in ms\n    this.currentTrialData.push({ x, y, z, interval, t });\n  };\n}\n\nexport default DeviceMotionExtension;\n"],"names":["DeviceMotionExtension","_createClass","jsPsych","_this","this","_classCallCheck","initialize","__awaiter","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","on_start","currentTrialData","on_load","currentTrialStartTime","performance","now","window","addEventListener","deviceMotionEventHandler","on_finish","removeEventListener","device_motion_data","eventA","event_time","t","Math","round","_eventA$acceleration","acceleration","x","y","z","interval","push","info","name"],"mappings":"i2OAEMA,IAAAA,EAAqBC,GAKzB,SAAAD,EAAoBE,GAAgB,IAAAC,EAAAC,kGAAAC,MAAAL,GAAhBI,KAAOF,QAAPA,EAKpBE,KAAAE,WAAa,WAAA,OAAaC,EAAAJ,OAAA,OAAA,EAAAK,IAAAC,MAAA,SAAAC,IAAA,OAAAF,IAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,IAAA,MAAA,OAAAF,EAAAG,OAAA,GAAAL,EAAC,IAAA,EAE3BN,KAAQY,SAAG,WACTb,EAAKc,iBAAmB,IAG1Bb,KAAOc,QAAG,WAERf,EAAKgB,sBAAwBC,YAAYC,MAGzCC,OAAOC,iBAAiB,eAAgBpB,EAAKqB,0BAA0B,IAGzEpB,KAASqB,UAAG,WAGV,OAFAH,OAAOI,oBAAoB,eAAgBvB,EAAKqB,0BAA0B,GAEnE,CACLG,mBAAoBxB,EAAKc,mBAIrBb,KAAAoB,yBAA2B,SAACI,GAClC,IAAMC,EAAaT,YAAYC,MACzBS,EAAIC,KAAKC,MAAMH,EAAa1B,EAAKgB,uBAEvCc,EAAoBL,EAAOM,aAAnBC,EAACF,EAADE,EAAGC,EAACH,EAADG,EAAGC,EAACJ,EAADI,EACRC,EAAWV,EAAOU,SACxBnC,EAAKc,iBAAiBsB,KAAK,CAAEJ,EAAAA,EAAGC,EAAAA,EAAGC,EAAAA,EAAGC,SAAAA,EAAUR,EAAAA,IAjCX,WAJhC9B,EAAAwC,KAA6B,CAClCC,KAAM"}