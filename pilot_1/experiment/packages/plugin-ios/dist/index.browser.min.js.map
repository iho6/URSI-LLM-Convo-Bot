{"version":3,"file":"index.browser.min.js","names":["jsPsychIos","jspsych","info","name","parameters","prompt","type","ParameterType","HTML_STRING","pretty_name","default","movable_circle","STRING","both_move","BOOL","front_circle","left_label","right_label","left_diam","INT","right_diam","max_sep","left_border_width","left_border_style","left_border_col","left_style","right_border_width","right_border_style","right_border_col","right_style","arrows","cursor","button_label","required","hide_initially","jsPsychIosPlugin","a","jsPsych","_classCallCheck","_createClass","key","value","trial","display_element","c","Math","abs","d","max","update_circles","x","ppn_x","slide_surface","document","getElementById","rect","getBoundingClientRect","left","width","right","move_circle","side_opposites","min_score","full_diam","ppn_overlap","side","ppn","circle","style","end_trial","trialdata","rt","response","innerHTML","finishTrial","nom_diam","both_circles_container","both_circles","arrow","full_border_cmd","single_circle_container","label_sep","label","clickable_area","submit_button","circles_movable","container","visibility","onmouseenter","e","clientX","continue_button","disabled","onmousedown","onmouseup","onmouseout","onmousemove","ontouchstart","changedTouches","length","ontouchend","ontouchleave","ontouchmove","onclick","endTime","performance","now","startTime","jsPsychModule"],"sources":["../index.js"],"sourcesContent":["var jsPsychIos = (function (jspsych) {\n  \"use strict\";\n\n  const info = {\n    name: \"ios\",\n    parameters: {\n      prompt: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"Prompt\",\n        default: undefined,\n      },\n      movable_circle: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Movable circle\",\n        default: 'right',\n      },\n      both_move: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Both circles move?\",\n        default: 'one',\n      },\n      front_circle: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Front circle\",\n        default: 'right',\n      },\n      left_label: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"Left circle label\",\n        default: '[left_label]',\n      },\n      right_label: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"Right circle label\",\n        default: '[right_label]',\n      },\n      left_diam: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Left circle diameter\",\n        default: 200,\n      },\n      right_diam: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Right circle diameter\",\n        default: 200,\n      },\n      max_sep: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Maximum separation\",\n        default: 0,\n      },\n      left_border_width: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Left circle border width\",\n        default: 2,\n      },\n      left_border_style: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Left circle border style\",\n        default: 'solid',\n      },\n      left_border_col: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Left circle border colour\",\n        default: 'black',\n      },\n      left_style: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Left circle style\",\n        default: '',\n      },\n      right_border_width: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Right circle border width\",\n        default: 2,\n      },\n      right_border_style: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Right circle border style\",\n        default: 'solid',\n      },\n      right_border_col: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Right circle border colour\",\n        default: 'black',\n      },\n      right_style: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Right circle style\",\n        default: '',\n      },\n      arrows: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Arrows\",\n        default: false,\n      },\n      cursor: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Cursor when circles clickable\",\n        default: \"crosshair\",\n      },\n      button_label: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"Buton label\",\n        default: \"Continue\",\n      },\n      required: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Response required\",\n        default: false,\n      },\n      hide_initially: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Hide initially\",\n        default: false,\n      }\n    },\n  };\n  class jsPsychIosPlugin {\n    constructor(jsPsych) {\n      this.jsPsych = jsPsych;\n    }\n    trial(display_element, trial) {\n      // Useful variables:\n      var side_opposites = {'left': 'right', 'right': 'left'};\n      var nom_diam = { // Nominal diameters\n        'left': trial.left_diam,\n        'right': trial.right_diam\n      }\n      var full_diam = { // Full diameters, accounting for border widths\n        'left': trial.left_diam + 2*trial.left_border_width,\n        'right': trial.right_diam + 2*trial.right_border_width\n      }\n      // Create HTML\n      var prompt = '<div id=\"jspsych-ios-prompt\" style=\"margin-bottom: 10px;\">' + trial.prompt + \"</div>\";\n      var both_circles_container = '<div id=\"jspsych-ios-circles-container\"' +\n        'style=\"position: relative; margin: auto;' +\n        'width: '  + (full_diam.left/2 + full_diam.right/2 + trial.max_sep) + 'px;' +\n        'height: ' + Math.max(full_diam.left, full_diam.right) + 'px;' +\n        '\">';\n      // Create both circles\n      var both_circles = {'left': null, 'right': null};\n      var side;\n      for (side in both_circles) {\n        var full_border_cmd =\n          trial[side + '_border_width'] + 'px ' +\n          trial[side + '_border_style'] + ' ' + \n          trial[side + '_border_col'];\n        // Create a \"surface\" on which the circle can \"slide\"\n        var slide_surface = '<div id=\"jspsych-ios-' + side + '-circle-slide-surface\" ' +\n          'style= ' +\n          '\"position: absolute;' +\n          'height: ' + Math.max(full_diam.left, full_diam.right) + 'px;' +\n          'width: ' + (full_diam.left/2 + full_diam.right/2 + trial.max_sep)*(trial.both_move? 0.5 : 1) + 'px;' +\n          'top: 0px;' +\n          side + ': 0px;' +\n          '\">'\n        // Create a container for both the circle and label\n        var single_circle_container = '<div id=\"jspsych-ios-' + side + '-circle-container\"' +\n          'style=\"position: absolute;' +\n          'width: '  + full_diam[side] + 'px;' +\n          'height: ' + full_diam[side] + 'px;' + \n          'top: '    + 0.5*(Math.max(full_diam.left, full_diam.right) - full_diam[side]) + 'px;' + // Vertical centering\n          side + ': ' + (-full_diam[side]/2) + 'px;' +\n          '\">'; // They should be pushed to the edges of the parent container\n        // Create the label and possibly arrow\n        var label_sep = Math.abs(full_diam[side] - full_diam[side_opposites[side]])/2 + 10;\n        var arrow;\n        if (trial.arrows) {\n          arrow =\n            '<div style=\"' + \n              'position: absolute; height: 2px;' + \n              'border-top: 2px solid black;' +\n              'width: ' + label_sep + 'px;' +\n              side + ': 100%;' +\n              'top: ' + (full_diam[side]/2 - trial[side + '_border_width']/2) + 'px;' +\n              '\">'+\n            '</div>';\n        } else {\n          arrow = '';\n        }\n        var label = '<div id=\"jspsych-ios-' + side + '-circle-label\"' + 'style=\"' + \n          'position: absolute;' + \n          'user-select: none;' +\n          'height:' + full_diam[side] + 'px;' +\n          'line-height:' + full_diam[side] + 'px;' +\n          'margin-' + side_opposites[side] + ': ' + label_sep + 'px;' +\n          side_opposites[side] + ': 100%\">' + // Should be pushed to the edges of the parent container\n            trial[side + '_label'] +\n            arrow +\n          '</div>';\n        // Create the circle\n        var circle = '<div id=\"jspsych-ios-' + side + '-circle\"' +\n          'style=\"position: absolute; border-radius: 50%;' +\n          'height: ' + nom_diam[side] + 'px;' +\n          'width: ' +  nom_diam[side] + 'px;' +\n          'border: ' + full_border_cmd + ';' +\n          trial[side + '_style'] +\n          '\"></div>';\n        // Store it all\n        both_circles[side] = \n          slide_surface +\n            single_circle_container +\n              label + circle +\n            '</div>' +\n          '</div>';\n      }\n      // Create a clickable area the doesn't include the circle labels\n      var clickable_area = '<div id=\"jspsych-ios-clickable\"' +\n        'style=\"position: absolute;' +\n        'height: ' + Math.max(full_diam.left, full_diam.right) + 'px;' +\n        'width: ' + ((full_diam.left/2 + full_diam.right/2 + trial.max_sep)*(trial.both_move? 0.5 : 1) + full_diam[trial.movable_circle]) + 'px;' +\n        trial.movable_circle + ': ' + (-full_diam[trial.movable_circle]/2) + 'px;' +\n        'cursor: ' + trial.cursor + ';' + \n        '\"></div>';\n      // Submit button\n      var submit_button = '<button id=\"jspsych-ios-next\" class=\"jspsych-btn\" ' +\n        'style=\"margin-top: 10px\" ' +\n        (trial.required ? \"disabled\" : \"\") + \">\" +\n        trial.button_label +\n        \"</button>\";\n      // Put it all together\n      display_element.innerHTML = \n        prompt +\n          both_circles_container +\n            // Order correctly\n            both_circles[side_opposites[trial.front_circle]] +\n            both_circles[trial.front_circle] +\n            clickable_area +\n          '</div>' +\n        '</div>' +\n        submit_button;\n\n      // Interactivity\n      var ppn_overlap;\n      function update_circles(x) {\n        // Compute the click x proportional to available space\n        var ppn_x;\n        var slide_surface = document.getElementById('jspsych-ios-' + trial.movable_circle + '-circle-slide-surface');\n        var rect = slide_surface.getBoundingClientRect();\n        if (trial.movable_circle == 'left') {\n          ppn_x = (x - rect.left) / rect.width;\n        } else if (trial.movable_circle == 'right') {\n          ppn_x = (rect.right - x) / rect.width;\n        }\n        if (ppn_x < 0) ppn_x = 0;\n        if (ppn_x > 1) ppn_x = 1;\n        // Move circles based on click\n        move_circle(trial.movable_circle, ppn_x);\n        if (trial.both_move) {\n          move_circle(side_opposites[trial.movable_circle], ppn_x);\n        }\n        // Compute proportion overlap, such that max. overlap = 1, 0 overlap = 0, and everything else is negative on the same scale\n        var min_score = -trial.max_sep/(0.5*(full_diam.left + full_diam.right))\n        var max_score = 1;\n        ppn_overlap = min_score + ppn_x*(max_score - min_score);\n      }\n\n      function move_circle(side, ppn) {\n        var circle = document.getElementById('jspsych-ios-' + side + '-circle-container');\n        var slide_surface = document.getElementById('jspsych-ios-' + side + '-circle-slide-surface');\n        var rect = slide_surface.getBoundingClientRect();\n        if (ppn == 1) {\n          circle.style[side] = '';\n          circle.style[side_opposites[side]] = -full_diam[side]/2 + 'px';\n        } else {\n          circle.style[side_opposites[side]] = '';\n          circle.style[side] = (ppn*rect.width - full_diam[side]/2) + 'px';\n        }\n      }\n\n      var clickable_area = document.getElementById('jspsych-ios-clickable');\n      var circles_movable;\n      if (trial.hide_initially) {\n        circles_movable = true;\n        // Hide both\n        var side, container;\n        for (side in both_circles) {\n          container = document.getElementById('jspsych-ios-' + side + '-circle-container');\n          container.style.visibility = 'hidden';\n        }\n        clickable_area.onmouseenter = function(e) {\n          for (side in both_circles) {\n            container = document.getElementById('jspsych-ios-' + side + '-circle-container');\n            container.style.visibility = 'visible';\n          }\n          update_circles(e.clientX);\n          continue_button.disabled = false;\n          clickable_area.onmouseenter = undefined;\n        }\n      } else {\n        circles_movable = false;\n      }\n      // Handle mouse events\n      clickable_area.onmousedown = function(e) {\n        circles_movable = true;\n        update_circles(e.clientX);\n        var continue_button = document.getElementById(\"jspsych-ios-next\");\n        continue_button.disabled = false;\n      }\n      clickable_area.onmouseup = function(e) {circles_movable = false}\n      clickable_area.onmouseout = function(e) {circles_movable = false}\n      clickable_area.onmousemove = function(e) {if (circles_movable) {update_circles(e.clientX)}}    \n      // Handle touch events\n      clickable_area.ontouchstart = function(e) {\n        circles_movable = true;\n        update_circles(e.changedTouches[e.changedTouches.length - 1].clientX);\n        var continue_button = document.getElementById(\"jspsych-ios-next\");\n        continue_button.disabled = false;\n      }\n      clickable_area.ontouchend = function(e) {circles_movable = false}\n      clickable_area.ontouchleave = function(e) {circles_movable = false}\n      clickable_area.ontouchmove = function(e) {if (circles_movable) {update_circles(e.changedTouches[e.changedTouches.length - 1].clientX)}}\n\n      // Data storage\n      var response = {\n        rt: null,\n        response: null\n      }\n      var continue_button = document.getElementById(\"jspsych-ios-next\");\n      continue_button.onclick = function() {\n        // measure response time\n        var endTime = performance.now();\n        response.rt = endTime - startTime;\n        response.response = ppn_overlap;\n        end_trial();\n      };\n      function end_trial() {\n        var trialdata = {\n          rt: response.rt,\n          prompt: trial.prompt,\n          response: response.response\n        };\n        display_element.innerHTML = \"\";\n        // next trial\n        jsPsych.finishTrial(trialdata);\n      }\n      // Start the RT clock\n      var startTime = performance.now();\n    }\n  }\n  jsPsychIosPlugin.info = info;\n\n  return jsPsychIosPlugin;\n})(jsPsychModule);\n"],"mappings":"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"}