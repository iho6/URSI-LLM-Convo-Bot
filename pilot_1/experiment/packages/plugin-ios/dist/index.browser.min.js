"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,_toPropertyKey(c.key),c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"==_typeof(b)?b:b+""}function _toPrimitive(a,b){if("object"!=_typeof(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=_typeof(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}var jsPsychIos=function(a){"use strict";var b={name:"ios",parameters:{prompt:{type:a.ParameterType.HTML_STRING,pretty_name:"Prompt",default:void 0},movable_circle:{type:a.ParameterType.STRING,pretty_name:"Movable circle",default:"right"},both_move:{type:a.ParameterType.BOOL,pretty_name:"Both circles move?",default:"one"},front_circle:{type:a.ParameterType.STRING,pretty_name:"Front circle",default:"right"},left_label:{type:a.ParameterType.HTML_STRING,pretty_name:"Left circle label",default:"[left_label]"},right_label:{type:a.ParameterType.HTML_STRING,pretty_name:"Right circle label",default:"[right_label]"},left_diam:{type:a.ParameterType.INT,pretty_name:"Left circle diameter",default:200},right_diam:{type:a.ParameterType.INT,pretty_name:"Right circle diameter",default:200},max_sep:{type:a.ParameterType.INT,pretty_name:"Maximum separation",default:0},left_border_width:{type:a.ParameterType.INT,pretty_name:"Left circle border width",default:2},left_border_style:{type:a.ParameterType.STRING,pretty_name:"Left circle border style",default:"solid"},left_border_col:{type:a.ParameterType.STRING,pretty_name:"Left circle border colour",default:"black"},left_style:{type:a.ParameterType.STRING,pretty_name:"Left circle style",default:""},right_border_width:{type:a.ParameterType.INT,pretty_name:"Right circle border width",default:2},right_border_style:{type:a.ParameterType.STRING,pretty_name:"Right circle border style",default:"solid"},right_border_col:{type:a.ParameterType.STRING,pretty_name:"Right circle border colour",default:"black"},right_style:{type:a.ParameterType.STRING,pretty_name:"Right circle style",default:""},arrows:{type:a.ParameterType.BOOL,pretty_name:"Arrows",default:!1},cursor:{type:a.ParameterType.STRING,pretty_name:"Cursor when circles clickable",default:"crosshair"},button_label:{type:a.ParameterType.HTML_STRING,pretty_name:"Buton label",default:"Continue"},required:{type:a.ParameterType.BOOL,pretty_name:"Response required",default:!1},hide_initially:{type:a.ParameterType.BOOL,pretty_name:"Hide initially",default:!1}}},c=/*#__PURE__*/function(){function a(b){_classCallCheck(this,a),this.jsPsych=b}return _createClass(a,[{key:"trial",value:function trial(a,b){var c=Math.abs,d=Math.max;function f(a){// Compute the click x proportional to available space
var c,d=document.getElementById("jspsych-ios-"+b.movable_circle+"-circle-slide-surface"),e=d.getBoundingClientRect();"left"==b.movable_circle?c=(a-e.left)/e.width:"right"==b.movable_circle&&(c=(e.right-a)/e.width),0>c&&(c=0),1<c&&(c=1),g(b.movable_circle,c),b.both_move&&g(j[b.movable_circle],c);// Compute proportion overlap, such that max. overlap = 1, 0 overlap = 0, and everything else is negative on the same scale
var f=-b.max_sep/(.5*(l.left+l.right));y=f+c*(1-f)}function g(a,b){var c=document.getElementById("jspsych-ios-"+a+"-circle-container"),d=document.getElementById("jspsych-ios-"+a+"-circle-slide-surface"),e=d.getBoundingClientRect();1==b?(c.style[a]="",c.style[j[a]]=-l[a]/2+"px"):(c.style[j[a]]="",c.style[a]=b*e.width-l[a]/2+"px")}function h(){var c={rt:B.rt,prompt:b.prompt,response:B.response};a.innerHTML="",jsPsych.finishTrial(c)}// Start the RT clock
// Useful variables:
var i,j={left:"right",right:"left"},k={// Nominal diameters
left:b.left_diam,right:b.right_diam},l={// Full diameters, accounting for border widths
left:b.left_diam+2*b.left_border_width,right:b.right_diam+2*b.right_border_width},m="<div id=\"jspsych-ios-prompt\" style=\"margin-bottom: 10px;\">"+b.prompt+"</div>",n="<div id=\"jspsych-ios-circles-container\"style=\"position: relative; margin: auto;width: "+(l.left/2+l.right/2+b.max_sep)+"px;height: "+d(l.left,l.right)+"px;\">",o={left:null,right:null};// Create HTML
// Create both circles
for(i in o){var p,q=b[i+"_border_width"]+"px "+b[i+"_border_style"]+" "+b[i+"_border_col"],r="<div id=\"jspsych-ios-"+i+"-circle-slide-surface\" style= \"position: absolute;height: "+d(l.left,l.right)+"px;width: "+(l.left/2+l.right/2+b.max_sep)*(b.both_move?.5:1)+"px;top: 0px;"+i+": 0px;\">",s="<div id=\"jspsych-ios-"+i+"-circle-container\"style=\"position: absolute;width: "+l[i]+"px;height: "+l[i]+"px;top: "+.5*(d(l.left,l.right)-l[i])+"px;"+// Vertical centering
i+": "+-l[i]/2+"px;\">",t=c(l[i]-l[j[i]])/2+10;// Create a "surface" on which the circle can "slide"
// Create a container for both the circle and label
// They should be pushed to the edges of the parent container
// Create the label and possibly arrow
p=b.arrows?"<div style=\"position: absolute; height: 2px;border-top: 2px solid black;width: "+t+"px;"+i+": 100%;top: "+(l[i]/2-b[i+"_border_width"]/2)+"px;\"></div>":"";var u="<div id=\"jspsych-ios-"+i+"-circle-label\"style=\"position: absolute;user-select: none;height:"+l[i]+"px;line-height:"+l[i]+"px;margin-"+j[i]+": "+t+"px;"+j[i]+": 100%\">"+// Should be pushed to the edges of the parent container
b[i+"_label"]+p+"</div>",v="<div id=\"jspsych-ios-"+i+"-circle\"style=\"position: absolute; border-radius: 50%;height: "+k[i]+"px;width: "+k[i]+"px;border: "+q+";"+b[i+"_style"]+"\"></div>";// Create the circle
o[i]=r+s+u+v+"</div></div>"}// Create a clickable area the doesn't include the circle labels
var w="<div id=\"jspsych-ios-clickable\"style=\"position: absolute;height: "+d(l.left,l.right)+"px;width: "+((l.left/2+l.right/2+b.max_sep)*(b.both_move?.5:1)+l[b.movable_circle])+"px;"+b.movable_circle+": "+-l[b.movable_circle]/2+"px;cursor: "+b.cursor+";\"></div>",x="<button id=\"jspsych-ios-next\" class=\"jspsych-btn\" style=\"margin-top: 10px\" "+(b.required?"disabled":"")+">"+b.button_label+"</button>";// Submit button
a.innerHTML=m+n+// Order correctly
o[j[b.front_circle]]+o[b.front_circle]+w+"</div></div>"+x;// Interactivity
var y,z,w=document.getElementById("jspsych-ios-clickable");if(b.hide_initially){z=!0;// Hide both
var i,A;for(i in o)A=document.getElementById("jspsych-ios-"+i+"-circle-container"),A.style.visibility="hidden";w.onmouseenter=function(a){for(i in o)A=document.getElementById("jspsych-ios-"+i+"-circle-container"),A.style.visibility="visible";f(a.clientX),C.disabled=!1,w.onmouseenter=void 0}}else z=!1;// Handle mouse events
w.onmousedown=function(a){z=!0,f(a.clientX);var b=document.getElementById("jspsych-ios-next");b.disabled=!1},w.onmouseup=function(){z=!1},w.onmouseout=function(){z=!1},w.onmousemove=function(a){z&&f(a.clientX)},w.ontouchstart=function(a){z=!0,f(a.changedTouches[a.changedTouches.length-1].clientX);var b=document.getElementById("jspsych-ios-next");b.disabled=!1},w.ontouchend=function(){z=!1},w.ontouchleave=function(){z=!1},w.ontouchmove=function(a){z&&f(a.changedTouches[a.changedTouches.length-1].clientX)};// Data storage
var B={rt:null,response:null},C=document.getElementById("jspsych-ios-next");C.onclick=function(){// measure response time
var a=performance.now();B.rt=a-D,B.response=y,h()};var D=performance.now()}}]),a}();return c.info=b,c}(jsPsychModule);

//# sourceMappingURL=index.browser.min.js.map