{"version":3,"file":"index.browser.min.js","names":["jsPsychLibetIntentionalBinding","jspsych","b","Math","PI","info","name","parameters","cond","type","ParameterType","STRING","pretty_name","default","description","est_wo_keypress","BOOL","tone_file","AUDIO","choices","KEYS","tone_delay_ms","INT","hand_est","instructions","HTML_STRING","instructions_wo_keypress","feedback","feedback_ms","pre_estimation_ms","hand_inc","FLOAT","offset_range","fixation_ms","clock_period","early_ms","early_fcn","FUNCTION","_default","timeout_ms","timeout_fcn","spin_continue_ms","clock_diam","n_maj_ticks","maj_tick_len","maj_tick_start","n_min_ticks","min_tick_len","min_tick_start","num","num_start","num_font","num_dist","hand_len","jsPsychLibetIntentionalBindingPlugin","a","jsPsych","_classCallCheck","_createClass","key","value","trial","display_element","clear_screen","ctx","clearRect","canvas","width","height","rotate_clock","direction","fac","delta_theta","clock","update_theta","draw_face","draw_fix","draw_hand","ctrl_fcn","ctrl","fix_col","theta","random","trial_data","spin_start","setTimeout","hand_col","window","requestAnimationFrame","animate","trial_cfg","key_press","pluginAPI","timeout","getKeyboardResponse","valid_responses","rt_method","persist","allow_held_key","callback_function","clearAllTimeouts","keypress","rt","early","tone","context","startTime","currentTime","audio","start","play","tone_ms","performance","now","target","stop","prompt_div","innerHTML","style","visibility","randomization","sampleWithReplacement","offset","estimation_start","toLowerCase","estimate","cancelAllKeyboardResponses","end_trial","c","sign","d","abs","est","targ","overshoot","finishTrial","i","curr_param","sin","e","cos","func_params","length","Function","document","createElement","appendChild","body","getElementsByClassName","getContext","middle_x","middle_y","diameter","radius","draw_ticks","n_ticks","tick_start","tick_len","beginPath","moveTo","lineTo","stroke","fillStyle","strokeStyle","arc","font","textBaseline","textAlign","fillText","prior_ss","fix_len","x","y","period","t_0","theta_0","t_last","raf_id","timestamp","cancelAnimationFrame","elapsed_ms","audioContext","getAudioBuffer","then","buffer","createBufferSource","connect","destination","err","console","error","jsPsychModule"],"sources":["../index.js"],"sourcesContent":["var jsPsychLibetIntentionalBinding = (function (jspsych) {\n  \"use strict\";\n\n  const info = {\n    name: \"libet-intentional-binding\",\n    parameters: {\n      cond: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"Condition\",\n        default: \"baseline-key\",\n        description:\n          'Specifies whether condition (\"baseline-key\", \"baseline-tone\", \"operant-key\", or \"operant-tone\".',\n      },\n      est_wo_keypress: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Estimate of urge without button press\",\n        default: false,\n        description:\n          \"Specifies whether you want participants to report the urge if they did not press the button.\",\n      },\n      tone_file: {\n        type: jspsych.ParameterType.AUDIO,\n        pretty_name: \"Tone file\",\n        default: null,\n        description: \"The audio file to be played.\",\n      },\n      choices: {\n        type: jspsych.ParameterType.KEYS,\n        pretty_name: \"Choices\",\n        default: \"ALL_KEYS\",\n        description: \"The keys a participant can press.\",\n      },\n      tone_delay_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Tone delay\",\n        default: 250,\n        description:\n          \"The time after the key press or the beginning of the clock animation that the tone is played, if applicable.\",\n      },\n      hand_est: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"\",\n        default: true,\n        description: \"Specifies whether the participant moves the hand to estimate an angle.\",\n      },\n      instructions: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"\",\n        default: \"\",\n        description: \"The instructions shown to the participant during estimation.\",\n      },\n      instructions_wo_keypress: {\n        type: jspsych.ParameterType.HTML_STRING,\n        pretty_name: \"\",\n        default: \"\",\n        description:\n          'The instructions shown to the participant during estimation if they did not make a keypress. E.g., \"When did you feel the urge to make a keypress?\". Only applicable if hand_est and est_wo_keypress are set to true. If left undefined, the parameter takes on the same value as instructions.',\n      },\n      feedback: {\n        type: jspsych.ParameterType.BOOL,\n        pretty_name: \"Feedback\",\n        default: false,\n        description: \"If true (and if hand_est is true), the participant sees feedback.\",\n      },\n      feedback_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Feedback length\",\n        default: 2000,\n        description: \"Number of milliseconds to display feedback, if applicable.\",\n      },\n      pre_estimation_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Pre-estimation delay\",\n        default: 1000,\n        description:\n          \"The length of time, in ms, that the clock hand disappears before reappearing to be moved by the participant.\",\n      },\n      hand_inc: {\n        type: jspsych.ParameterType.FLOAT,\n        pretty_name: \"Clock hand increment\",\n        default: (Math.PI * 2) / 120,\n        description: \"The minimum number of radians a participant can rotate the clock hand.\",\n      },\n      offset_range: {\n        type: jspsych.ParameterType.FLOAT,\n        pretty_name: \"Offset range\",\n        default: [Math.PI / 4, Math.PI / 3],\n        description:\n          \"When the participant is able to move the clock hand, its initial angle will be offset from the correct angle by an absolute amount drawn from this range (in radians). Half the time the initial angle will be offset a positive amount, half the time a negative amount.\",\n      },\n      fixation_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Fixation duration\",\n        default: 400,\n        description: \"Duration of the pre-trial fixation cross in ms.\",\n      },\n      clock_period: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Clock period\",\n        default: 2560,\n        description: \"The period of the clock in ms.\",\n      },\n      early_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Earliest keypress\",\n        default: 2560,\n        description:\n          \"The earliest allowable keypress, measured in milliseconds since the clock hand begins rotating.\",\n      },\n      early_fcn: {\n        type: jspsych.ParameterType.FUNCTION,\n        pretty_name: \"Early keypress function\",\n        default: function () {},\n        description: \"Function called when the participant responds too early.\",\n      },\n      timeout_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Max trial length\",\n        default: 4000,\n        description: \"The maximum length of a trial, in milliseconds.\",\n      },\n      timeout_fcn: {\n        type: jspsych.ParameterType.FUNCTION,\n        pretty_name: \"Timeout function\",\n        default: function () {},\n        description: \"Function called when a trial times out.\",\n      },\n      spin_continue_ms: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Residual spinning length\",\n        default: 1000,\n        description:\n          'The length of time, in ms, after the \"critical event\" (key press or tone, whichever comes later) that the clock animation continues.',\n      },\n      clock_diam: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Clock diameter\",\n        default: 200,\n        description: \"The diameter of the clock in pixels.\",\n      },\n      n_maj_ticks: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Number of major ticks\",\n        default: 60,\n        description: \"The number of major ticks to draw on the clock face.\",\n      },\n      maj_tick_len: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Major tick length\",\n        default: 12,\n        description: \"Length of major ticks in pixels.\",\n      },\n      maj_tick_start: {\n        type: jspsych.ParameterType.FLOAT,\n        pretty_name: \"Major tick start\",\n        default: 0,\n        description: \"Where to draw the first major tick, in radians.\",\n      },\n      n_min_ticks: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Number of minor ticks\",\n        default: 60,\n        description: \"The number of minor ticks to draw on the clock face.\",\n      },\n      min_tick_len: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Minor tick length\",\n        default: 6,\n        description: \"Length of minor ticks in pixels.\",\n      },\n      min_tick_start: {\n        type: jspsych.ParameterType.FLOAT,\n        pretty_name: \"Minor tick start\",\n        default: (Math.PI * 2) / 120,\n        description: \"Where to draw the first minor tick, in radians.\",\n      },\n      num: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Numbers\",\n        default: [60, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 5],\n        description: \"The numbers to draw around the clock face.\",\n      },\n      num_start: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"\",\n        default: Math.PI / 2,\n        description: \"Where to draw the first number, in radians.\",\n      },\n      num_font: {\n        type: jspsych.ParameterType.STRING,\n        pretty_name: \"\",\n        default: \"5mm Arial\",\n        description: \"The font for the numbers.\",\n      },\n      num_dist: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"\",\n        default: 30,\n        description: \"Distance of the numbers from the outer circle of the clock, in pixels.\",\n      },\n      hand_len: {\n        type: jspsych.ParameterType.INT,\n        pretty_name: \"Hand length\",\n        default: 80,\n        description: \"Length of the clock hand in pixels\",\n      },\n    },\n  };\n\n  /**\n   * **libet-intetional-binding**\n   *\n   * A jsPsych plugin for measuring intentional binding using a libet\n   * clock, as described and demonstrated in\n   * https://doi.org/10.1016/j.concog.2021.103217\n   * citation: Galang, C. M., Malik, R., Kinley, I., & Obhi, S. S.\n   * (2021). Studying sense of agency online: Can intentional binding be\n   * observed in uncontrolled online settings? Consciousness and\n   * Cognition, 95, 103217.\n   *\n   * @author Isaac Kinley\n   * @see {@link https://DOCUMENTATION_URL DOCUMENTATION LINK TEXT}\n   *\n   * Modification by Yu Hei Shum on 28/1/2022:\n   * 1. the loading of the tone will be skipped if you don't specify the tone file name (for classical Libet task)\n   * 2. the urge reporting can be preserved if you specify the parameter skip urge as true,\n   * the default is set as false for classical Libet and intentional blinding task\n   */\n  class jsPsychLibetIntentionalBindingPlugin {\n    constructor(jsPsych) {\n      this.jsPsych = jsPsych;\n    }\n    trial(display_element, trial) {\n      // If any parameters are functions, call those functions\n      var func_params = [\n        \"cond\",\n        \"est_wo_keypress\",\n        \"tone_file\",\n        \"choices\",\n        \"tone_delay_ms\",\n        \"hand_est\",\n        \"instructions\",\n        \"instructions_wo_keypress\",\n        \"feedback\",\n        \"feedback_ms\",\n        \"pre_estimation_ms\",\n        \"hand_inc\",\n        \"offset_range\",\n        \"fixation_ms\",\n        \"clock_period\",\n        \"early_ms\",\n        // 'early_fcn',\n        \"timeout_ms\",\n        \"spin_continue_ms\",\n        \"clock_diam\",\n        \"n_maj_ticks\",\n        \"maj_tick_len\",\n        \"maj_tick_start\",\n        \"n_min_ticks\",\n        \"min_tick_len\",\n        \"min_tick_start\",\n        \"num\",\n        \"num_start\",\n        \"num_font\",\n        \"num_dist\",\n        \"hand_len\",\n      ];\n      var i, curr_param;\n      for (i = 0; i < func_params.length; i++) {\n        curr_param = func_params[i];\n        if (trial[curr_param] instanceof Function) {\n          trial[curr_param] = trial[curr_param]();\n        }\n      }\n      // create a div for instructions\n      var prompt_div = document.createElement(\"div\");\n      prompt_div.innerHTML = trial.instructions;\n      prompt_div.style.visibility = \"hidden\";\n      display_element.appendChild(prompt_div);\n\n      //Create a canvas element and append it to the DOM\n      var canvas = document.createElement(\"canvas\");\n      display_element.appendChild(canvas);\n\n      //The document body IS 'display_element' (i.e. <body class=\"jspsych-display-element\"> .... </body> )\n      var body = document.getElementsByClassName(\"jspsych-display-element\")[0];\n\n      //Get the context of the canvas so that it can be painted on.\n      var ctx = canvas.getContext(\"2d\");\n\n      //Declare variables for width and height, and also set the canvas width and height to the window width and height\n      canvas.width = trial.clock_diam * 2;\n      canvas.height = trial.clock_diam * 2;\n      var middle_x = canvas.width / 2;\n      var middle_y = canvas.height / 2;\n\n      // track whether key press should occur and whether a tone should be played\n      var trial_cfg = {\n        key_press: true,\n        tone: true,\n      };\n      if (trial.cond == \"baseline-key\") {\n        trial_cfg.tone = false;\n      } else if (trial.cond == \"baseline-tone\") {\n        trial_cfg.key_press = false;\n      }\n\n      var trial_data = {\n        cond: trial.cond,\n        early: false,\n        timeout: false,\n      };\n\n      function clear_screen() {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n      }\n\n      // clock object\n      var clock = {\n        diameter: trial.clock_diam,\n        radius: trial.clock_diam / 2,\n        theta: null,\n        update_theta: function (delta_theta) {\n          clock.theta = clock.theta + delta_theta;\n          clock.theta = clock.theta % (Math.PI * 2);\n        },\n        draw_ticks: function (n_ticks, tick_start, tick_len) {\n          // function to draw ticks\n          var i, theta;\n          for (i = 0; i < n_ticks; i++) {\n            theta = tick_start + (i * Math.PI * 2) / n_ticks;\n            ctx.beginPath();\n            ctx.moveTo(\n              middle_x + clock.radius * Math.cos(theta),\n              middle_y - clock.radius * Math.sin(theta)\n            );\n            ctx.lineTo(\n              middle_x + (clock.radius + tick_len) * Math.cos(theta),\n              middle_y - (clock.radius + tick_len) * Math.sin(theta)\n            );\n            ctx.stroke();\n          }\n        },\n        draw_face: function () {\n          // function to draw the clock face\n          ctx.fillStyle = \"black\";\n          ctx.strokeStyle = \"black\";\n          // circle\n          ctx.beginPath();\n          ctx.arc(middle_x, middle_y, clock.radius, 0, 2 * Math.PI);\n          ctx.stroke();\n          // tick marks, major and minor\n          clock.draw_ticks(trial.n_maj_ticks, trial.maj_tick_start, trial.maj_tick_len);\n          clock.draw_ticks(trial.n_min_ticks, trial.min_tick_start, trial.min_tick_len);\n          // numbers\n          var i, theta;\n          for (i = 0; i < trial.num.length; i++) {\n            theta = trial.num_start + (i * Math.PI * 2) / trial.num.length;\n            ctx.font = trial.num_font;\n            ctx.textBaseline = \"middle\";\n            ctx.textAlign = \"center\";\n            ctx.fillText(\n              trial.num[i],\n              middle_x + (clock.radius + trial.num_dist) * Math.cos(theta),\n              middle_y - (clock.radius + trial.num_dist) * Math.sin(theta)\n            );\n          }\n        },\n        fix_col: \"black\",\n        draw_fix: function () {\n          var prior_ss = ctx.strokeStyle;\n          ctx.strokeStyle = clock.fix_col;\n          var fix_len = ((2 / 30) * clock.diameter) / 2;\n          var x = [1, 0, -1, 0];\n          var y = [0, 1, 0, -1];\n          var i;\n          for (i = 0; i < 4; i++) {\n            ctx.beginPath();\n            ctx.moveTo(middle_x, middle_y);\n            ctx.lineTo(middle_x + x[i] * fix_len, middle_y + y[i] * fix_len);\n            ctx.stroke();\n          }\n          ctx.strokeStyle = prior_ss;\n        },\n        hand_col: \"black\",\n        draw_hand: function () {\n          var prior_ss = ctx.strokeStyle;\n          ctx.strokeStyle = clock.hand_col;\n          ctx.beginPath();\n          ctx.moveTo(middle_x, middle_y);\n          ctx.lineTo(\n            middle_x + trial.hand_len * Math.cos(clock.theta),\n            middle_y - trial.hand_len * Math.sin(clock.theta)\n          );\n          ctx.stroke();\n          ctx.strokeStyle = prior_ss;\n        },\n        period: trial.clock_period,\n        stop: false,\n        t_0: null, // when rotation began\n        theta_0: null, // initial hand angle\n        t_last: null,\n        raf_id: null, // requestAnimationFrame ID\n        animate: function () {\n          var timestamp = performance.now();\n          if (clock.stop) {\n            // stop animation\n            window.cancelAnimationFrame(clock.raf_id);\n            // draw empty face\n            clear_screen();\n            clock.draw_face();\n            clock.draw_fix();\n            // reset\n            clock.stop = false;\n            clock.t_last = null;\n            clock.raf_id = null;\n          } else {\n            clock.raf_id = window.requestAnimationFrame(clock.animate);\n            if (clock.t_0 == null) {\n              // first call\n              clock.t_0 = timestamp;\n              clock.t_last = timestamp;\n              // trial_data.clock_start_ms = clock.t_0;\n              clock.theta_0 = clock.theta;\n            } else {\n              // compute elapsed time and update theta\n              var elapsed_ms = timestamp - clock.t_last;\n              clock.t_last = timestamp;\n              var delta_theta = (elapsed_ms / clock.period) * Math.PI * 2;\n              clock.update_theta(-delta_theta);\n            }\n            // draw stimuli\n            clear_screen();\n            clock.draw_face();\n            clock.draw_fix();\n            clock.draw_hand();\n          }\n        },\n      };\n\n      // rotator object, which responds to keyboard input and moves the clock hand\n      function rotate_clock(direction) {\n        var fac = 0;\n        if (direction == \"left\") {\n          fac = 1;\n        } else if (direction == \"right\") {\n          fac = -1;\n        }\n        var delta_theta = fac * trial.hand_inc;\n        clock.update_theta(delta_theta);\n        // draw clock\n        clear_screen();\n        clock.draw_face();\n        clock.draw_fix();\n        clock.draw_hand();\n      }\n\n      // load audio\n      // If you did not specify the tone file, the tone loading will be skipped.\n      if (trial.tone_file != null) {\n        var context = jsPsych.pluginAPI.audioContext();\n        var audio;\n        // load audio file\n        this.jsPsych.pluginAPI\n          .getAudioBuffer(trial.tone_file)\n          .then((buffer) => {\n            if (context !== null) {\n              audio = context.createBufferSource();\n              audio.buffer = buffer;\n              audio.connect(context.destination);\n            } else {\n              audio = buffer;\n              audio.currentTime = 0;\n            }\n            ctrl_fcn(\"start trial\");\n          })\n          .catch((err) => {\n            console.error(\n              'Failed to load audio file \"${trial.tone_file}\". Try checking the file path. We recommend using the preload plugin to load audio files.'\n            );\n            console.error(err);\n          });\n      } else {\n        ctrl_fcn(\"start trial\");\n      }\n\n      function ctrl_fcn(ctrl) {\n        // this is the big control flow function. depending\n        // on the value of ctrl, it initiates different parts\n        // of the trial\n        if (ctrl == \"start trial\") {\n          // begin a new trial\n          // draw initial yellow cross\n          clear_screen();\n          clock.fix_col = \"yellow\";\n          clock.draw_face();\n          clock.draw_fix();\n          // wait the designated number of ms, then start rotating the clock hand\n          clock.theta = Math.random() * Math.PI * 2;\n          trial_data.theta = {\n            spin_start: clock.theta,\n          };\n          setTimeout(function () {\n            // begin rotating the clock hand\n            clock.fix_col = \"black\";\n            clock.hand_col = \"black\";\n            window.requestAnimationFrame(clock.animate);\n            if (trial_cfg.key_press) {\n              // schedule the trial to stop after the max trial length, or to continue to estimate, depends on the parameter set\n              if (trial.timeout_ms) {\n                jsPsych.pluginAPI.setTimeout(function () {\n                  trial_data.timeout = true;\n                  // call user-defined timeout function\n                  trial.timeout_fcn();\n                  if (trial.est_wo_keypress) {\n                    ctrl_fcn(\"estimate\");\n                  } else {\n                    ctrl_fcn(\"end\");\n                  }\n                }, trial.timeout_ms);\n              }\n              // add a response listener that cancels the trial stop\n              jsPsych.pluginAPI.getKeyboardResponse({\n                valid_responses: trial.choices,\n                rt_method: \"performance\",\n                persist: false,\n                allow_held_key: false,\n                callback_function: function (info) {\n                  // trial_data.rt = info.rt;\n                  // trial_data.keypress_ms = performance.now();\n                  // cancel end of trial timeout\n                  jsPsych.pluginAPI.clearAllTimeouts();\n                  // compute clock theta at the time of response\n                  trial_data.theta.keypress = clock.theta;\n                  if (info.rt < trial.early_ms) {\n                    trial_data.early = true;\n                    // call user-defined early keypress function and don't call out the estimate procedure twice if the participant skips the trial.\n                    trial.early_fcn();\n                    ctrl_fcn(\"end\");\n                  } else {\n                    if (trial_cfg.tone) {\n                      ctrl_fcn(\"tone\");\n                    } else {\n                      ctrl_fcn(\"estimate\");\n                    }\n                  }\n                },\n              });\n            } else if (trial_cfg.tone) {\n              // trigger the tone to eventually be played\n              ctrl_fcn(\"tone\");\n            }\n          }, trial.fixation_ms);\n        } else if (ctrl == \"tone\") {\n          // play the tone\n          // schedule tone\n          setTimeout(function () {\n            // play the tone\n            if (context !== null) {\n              var startTime = context.currentTime;\n              audio.start(startTime);\n            } else {\n              audio.play();\n            }\n            // record cock hand angle of audio\n            trial_data.theta.tone = clock.theta;\n            trial_data.tone_ms = performance.now();\n            // trigger estimation?\n            ctrl_fcn(\"estimate\");\n          }, trial.tone_delay_ms);\n        } else if (ctrl == \"estimate\") {\n          // estimate the time of the key press or tone\n          // which should be estimated?\n          if (trial_data.timeout) {\n            // we can infer that the participant is allowed to do\n            // estimation without having made a keypress.\n            trial_data.theta.target = null;\n          } else {\n            if ((trial.cond == \"baseline-key\") | (trial.cond == \"operant-key\")) {\n              trial_data.theta.target = trial_data.theta.keypress;\n            } else if ((trial.cond == \"baseline-tone\") | (trial.cond == \"operant-tone\")) {\n              trial_data.theta.target = trial_data.theta.tone;\n            }\n          }\n          // schedule end of clock rotation\n          setTimeout(function () {\n            clock.stop = true;\n            // trial_data.spin_continue_ms = trial.spin_continue_ms;\n            // schedule beginning of estimation\n            setTimeout(function () {\n              if (trial.hand_est) {\n                if (trial_data.timeout) {\n                  // we can infer that the participant is allowed to do\n                  // estimation without having made a keypress. Therefore\n                  // update the text of the prompt\n                  if (trial.instructions_wo_keypress) {\n                    prompt_div.innerHTML = trial.instructions_wo_keypress;\n                  }\n                }\n                // add prompt\n                prompt_div.style.visibility = \"visible\";\n                // randomize initial hand placement\n                var fac = jsPsych.randomization.sampleWithReplacement([-1, 1], 1)[0];\n                var offset =\n                  Math.random() * (trial.offset_range[1] - trial.offset_range[0]) +\n                  trial.offset_range[0];\n                clock.theta = trial_data.theta.target + fac * offset;\n                clock.update_theta(0);\n                // record where the hand was at the beginning of the estimation period\n                trial_data.theta.estimation_start = clock.theta;\n                clock.hand_col = \"green\";\n                // trial_data.est_start_ms = performance.now();\n                // estimate by moving the clock hand\n                jsPsych.pluginAPI.getKeyboardResponse({\n                  valid_responses: \"ALL_KEYS\",\n                  rt_method: \"performance\",\n                  persist: true,\n                  allow_held_key: true,\n                  callback_function: function (info) {\n                    var key = info.key.toLowerCase();\n                    if (key == \"arrowleft\") {\n                      rotate_clock(\"left\");\n                    } else if (key == \"arrowright\") {\n                      rotate_clock(\"right\");\n                    } else if (key == \"enter\") {\n                      // record estimated theta\n                      // trial_data.est_end_ms = performance.now();\n                      trial_data.theta.estimate = clock.theta;\n                      jsPsych.pluginAPI.cancelAllKeyboardResponses();\n                      if (trial.feedback) {\n                        clock.theta = trial_data.theta.target;\n                        clock.hand_col = \"black\";\n                        clock.draw_hand();\n                        setTimeout(function () {\n                          ctrl_fcn(\"end\");\n                        }, trial.feedback_ms);\n                      } else {\n                        ctrl_fcn(\"end\");\n                      }\n                    }\n                  },\n                });\n                rotate_clock();\n              } else {\n                // assumedly the user has programmed a survey-text trial\n                ctrl_fcn(\"end\");\n              }\n            }, trial.pre_estimation_ms);\n          }, trial.spin_continue_ms);\n        } else if (ctrl == \"end\") {\n          end_trial();\n        }\n      }\n\n      // function to end trial when it is time\n      function end_trial() {\n        // kill any remaining setTimeout handlers\n        jsPsych.pluginAPI.clearAllTimeouts();\n\n        // kill keyboard listeners\n        jsPsych.pluginAPI.cancelAllKeyboardResponses();\n\n        // clear the display\n        display_element.innerHTML = \"\";\n\n        // compute error\n        var est = trial_data.theta.estimate;\n        if (est < 0) {\n          est < -est + 2 * Math.PI;\n        }\n        var targ = trial_data.theta.target;\n        if (targ < 0) {\n          targ < -targ + 2 * Math.PI;\n        }\n        var overshoot = targ - est;\n        if (Math.abs(overshoot) > Math.PI) {\n          overshoot = -Math.sign(overshoot) * (2 * Math.PI - Math.abs(overshoot));\n        }\n        trial_data.theta.overshoot = overshoot;\n\n        // move on to the next trial\n        jsPsych.finishTrial(trial_data);\n      }\n    }\n  }\n  jsPsychLibetIntentionalBindingPlugin.info = info;\n\n  return jsPsychLibetIntentionalBindingPlugin;\n})(jsPsychModule);\n"],"mappings":"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"}