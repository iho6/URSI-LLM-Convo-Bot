var jsPsychHtmlChoice=function(e){"use strict";function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}var a={name:"html-choice",parameters:{html_array:{type:e.ParameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0},stimulus_duration:{type:e.ParameterType.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:e.ParameterType.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:e.ParameterType.BOOL,pretty_name:"Response ends trial",default:!0},values:{type:e.ParameterType.STRING,pretty_name:"Values",default:null},time_after_response:{type:e.ParameterType.INT,pretty_name:"Time after response",default:0}}},n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var t,a,n;return t=e,(a=[{key:"trial",value:function(e,t){var r,a=this;if(t.values){if(t.values.length!==t.html_array.length)throw new Error("array of html-choices does not have the same length as array of valuse");r=t.values}else r=Array(t.html_array.length).fill(null);for(var n="<div>",l=0;l<t.html_array.length;l++)n+='<div class= "jspsych-html-choice" id="jspsych-html-choice-'+l+'" data-choice='+l+" value="+r[l]+">",n+=t.html_array[l],n+="</div>";n+="</div>",e.innerHTML=n;for(var i=performance.now(),s=0;s<t.html_array.length;s++)e.querySelector("#jspsych-html-choice-"+s).addEventListener("click",(function(e){var t=e.currentTarget,r=t.getAttribute("data-choice"),a=t.getAttribute("value");c(r,a)}));var u={rt:null,choice:null,value:null},o=function(){a.jsPsych.pluginAPI.clearAllTimeouts();var r={rt:u.rt,stimulus:t.html_array,response:u.choice,value:u.value};e.innerHTML="",a.jsPsych.finishTrial(r)},c=function(r,n){var l=performance.now(),s=Math.round(l-i);u.choice=parseInt(r),u.value=parseInt(n),u.rt=s,e.querySelector("#jspsych-html-choice-"+r).className+=" responded";for(var c=document.querySelectorAll(".jspsych-html-choice"),h=0;h<c.length;h++)c[h].style.pointerEvents="none";t.response_ends_trial&&(a.jsPsych.pluginAPI.clearAllTimeouts(),a.jsPsych.pluginAPI.setTimeout(o,t.time_after_response))};null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){e.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(o,t.trial_duration)}}])&&r(t.prototype,a),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();return n.info=a,n}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
