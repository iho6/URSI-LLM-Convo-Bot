{"version":3,"file":"index.browser.js","sources":["../../../node_modules/openai/_shims/registry.mjs","../../../node_modules/openai/_shims/MultipartBody.mjs","../../../node_modules/openai/_shims/web-runtime.mjs","../../../node_modules/openai/_shims/index.mjs","../../../node_modules/openai/streaming.mjs","../../../node_modules/openai/core.mjs","../../../node_modules/openai/error.mjs","../../../node_modules/openai/lib/RunnableFunction.mjs","../../../node_modules/openai/lib/chatCompletionUtils.mjs","../../../node_modules/openai/lib/AbstractChatCompletionRunner.mjs","../../../node_modules/openai/lib/ChatCompletionStream.mjs","../src/ChatLog.ts","../src/index.ts"],"sourcesContent":["export let auto = false;\nexport let kind = undefined;\nexport let fetch = undefined;\nexport let Request = undefined;\nexport let Response = undefined;\nexport let Headers = undefined;\nexport let FormData = undefined;\nexport let Blob = undefined;\nexport let File = undefined;\nexport let ReadableStream = undefined;\nexport let getMultipartRequestOptions = undefined;\nexport let getDefaultAgent = undefined;\nexport let fileFromPath = undefined;\nexport let isFsReadStream = undefined;\nexport function setShims(shims, options = { auto: false }) {\n    if (auto) {\n        throw new Error(`you must \\`import 'openai/shims/${shims.kind}'\\` before importing anything else from openai`);\n    }\n    if (kind) {\n        throw new Error(`can't \\`import 'openai/shims/${shims.kind}'\\` after \\`import 'openai/shims/${kind}'\\``);\n    }\n    auto = options.auto;\n    kind = shims.kind;\n    fetch = shims.fetch;\n    Request = shims.Request;\n    Response = shims.Response;\n    Headers = shims.Headers;\n    FormData = shims.FormData;\n    Blob = shims.Blob;\n    File = shims.File;\n    ReadableStream = shims.ReadableStream;\n    getMultipartRequestOptions = shims.getMultipartRequestOptions;\n    getDefaultAgent = shims.getDefaultAgent;\n    fileFromPath = shims.fileFromPath;\n    isFsReadStream = shims.isFsReadStream;\n}\n//# sourceMappingURL=registry.mjs.map","/**\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\n */\nexport class MultipartBody {\n    constructor(body) {\n        this.body = body;\n    }\n    get [Symbol.toStringTag]() {\n        return 'MultipartBody';\n    }\n}\n//# sourceMappingURL=MultipartBody.mjs.map","import { MultipartBody } from \"./MultipartBody.mjs\";\nexport function getRuntime({ manuallyImported } = {}) {\n    const recommendation = manuallyImported ?\n        `You may need to use polyfills`\n        : `Add one of these imports before your first \\`import â€¦ from 'openai'\\`:\n- \\`import 'openai/shims/node'\\` (if you're running on Node)\n- \\`import 'openai/shims/web'\\` (otherwise)\n`;\n    let _fetch, _Request, _Response, _Headers;\n    try {\n        // @ts-ignore\n        _fetch = fetch;\n        // @ts-ignore\n        _Request = Request;\n        // @ts-ignore\n        _Response = Response;\n        // @ts-ignore\n        _Headers = Headers;\n    }\n    catch (error) {\n        throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);\n    }\n    return {\n        kind: 'web',\n        fetch: _fetch,\n        Request: _Request,\n        Response: _Response,\n        Headers: _Headers,\n        FormData: \n        // @ts-ignore\n        typeof FormData !== 'undefined' ? FormData : (class FormData {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);\n            }\n        }),\n        Blob: typeof Blob !== 'undefined' ? Blob : (class Blob {\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);\n            }\n        }),\n        File: \n        // @ts-ignore\n        typeof File !== 'undefined' ? File : (class File {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);\n            }\n        }),\n        ReadableStream: \n        // @ts-ignore\n        typeof ReadableStream !== 'undefined' ? ReadableStream : (class ReadableStream {\n            // @ts-ignore\n            constructor() {\n                throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);\n            }\n        }),\n        getMultipartRequestOptions: async (\n        // @ts-ignore\n        form, opts) => ({\n            ...opts,\n            body: new MultipartBody(form),\n        }),\n        getDefaultAgent: (url) => undefined,\n        fileFromPath: () => {\n            throw new Error('The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads');\n        },\n        isFsReadStream: (value) => false,\n    };\n}\n//# sourceMappingURL=web-runtime.mjs.map","/**\n * Disclaimer: modules in _shims aren't intended to be imported by SDK users.\n */\nimport * as shims from './registry.mjs';\nimport * as auto from 'openai/_shims/auto/runtime';\nif (!shims.kind) shims.setShims(auto.getRuntime(), { auto: true });\nexport * from './registry.mjs';\n","import { ReadableStream } from \"./_shims/index.mjs\";\nimport { OpenAIError } from \"./error.mjs\";\nimport { APIError } from 'openai/error';\nexport class Stream {\n    constructor(iterator, controller) {\n        this.iterator = iterator;\n        this.controller = controller;\n    }\n    static fromSSEResponse(response, controller) {\n        let consumed = false;\n        async function* iterator() {\n            if (consumed) {\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n            }\n            consumed = true;\n            let done = false;\n            try {\n                for await (const sse of _iterSSEMessages(response, controller)) {\n                    if (done)\n                        continue;\n                    if (sse.data.startsWith('[DONE]')) {\n                        done = true;\n                        continue;\n                    }\n                    if (sse.event === null) {\n                        let data;\n                        try {\n                            data = JSON.parse(sse.data);\n                        }\n                        catch (e) {\n                            console.error(`Could not parse message into JSON:`, sse.data);\n                            console.error(`From chunk:`, sse.raw);\n                            throw e;\n                        }\n                        if (data && data.error) {\n                            throw new APIError(undefined, data.error, undefined, undefined);\n                        }\n                        yield data;\n                    }\n                    else {\n                        let data;\n                        try {\n                            data = JSON.parse(sse.data);\n                        }\n                        catch (e) {\n                            console.error(`Could not parse message into JSON:`, sse.data);\n                            console.error(`From chunk:`, sse.raw);\n                            throw e;\n                        }\n                        // TODO: Is this where the error should be thrown?\n                        if (sse.event == 'error') {\n                            throw new APIError(undefined, data.error, data.message, undefined);\n                        }\n                        yield { event: sse.event, data: data };\n                    }\n                }\n                done = true;\n            }\n            catch (e) {\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\n                if (e instanceof Error && e.name === 'AbortError')\n                    return;\n                throw e;\n            }\n            finally {\n                // If the user `break`s, abort the ongoing request.\n                if (!done)\n                    controller.abort();\n            }\n        }\n        return new Stream(iterator, controller);\n    }\n    /**\n     * Generates a Stream from a newline-separated ReadableStream\n     * where each item is a JSON value.\n     */\n    static fromReadableStream(readableStream, controller) {\n        let consumed = false;\n        async function* iterLines() {\n            const lineDecoder = new LineDecoder();\n            const iter = readableStreamAsyncIterable(readableStream);\n            for await (const chunk of iter) {\n                for (const line of lineDecoder.decode(chunk)) {\n                    yield line;\n                }\n            }\n            for (const line of lineDecoder.flush()) {\n                yield line;\n            }\n        }\n        async function* iterator() {\n            if (consumed) {\n                throw new Error('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n            }\n            consumed = true;\n            let done = false;\n            try {\n                for await (const line of iterLines()) {\n                    if (done)\n                        continue;\n                    if (line)\n                        yield JSON.parse(line);\n                }\n                done = true;\n            }\n            catch (e) {\n                // If the user calls `stream.controller.abort()`, we should exit without throwing.\n                if (e instanceof Error && e.name === 'AbortError')\n                    return;\n                throw e;\n            }\n            finally {\n                // If the user `break`s, abort the ongoing request.\n                if (!done)\n                    controller.abort();\n            }\n        }\n        return new Stream(iterator, controller);\n    }\n    [Symbol.asyncIterator]() {\n        return this.iterator();\n    }\n    /**\n     * Splits the stream into two streams which can be\n     * independently read from at different speeds.\n     */\n    tee() {\n        const left = [];\n        const right = [];\n        const iterator = this.iterator();\n        const teeIterator = (queue) => {\n            return {\n                next: () => {\n                    if (queue.length === 0) {\n                        const result = iterator.next();\n                        left.push(result);\n                        right.push(result);\n                    }\n                    return queue.shift();\n                },\n            };\n        };\n        return [\n            new Stream(() => teeIterator(left), this.controller),\n            new Stream(() => teeIterator(right), this.controller),\n        ];\n    }\n    /**\n     * Converts this stream to a newline-separated ReadableStream of\n     * JSON stringified values in the stream\n     * which can be turned back into a Stream with `Stream.fromReadableStream()`.\n     */\n    toReadableStream() {\n        const self = this;\n        let iter;\n        const encoder = new TextEncoder();\n        return new ReadableStream({\n            async start() {\n                iter = self[Symbol.asyncIterator]();\n            },\n            async pull(ctrl) {\n                try {\n                    const { value, done } = await iter.next();\n                    if (done)\n                        return ctrl.close();\n                    const bytes = encoder.encode(JSON.stringify(value) + '\\n');\n                    ctrl.enqueue(bytes);\n                }\n                catch (err) {\n                    ctrl.error(err);\n                }\n            },\n            async cancel() {\n                await iter.return?.();\n            },\n        });\n    }\n}\nexport async function* _iterSSEMessages(response, controller) {\n    if (!response.body) {\n        controller.abort();\n        throw new OpenAIError(`Attempted to iterate over a response with no body`);\n    }\n    const sseDecoder = new SSEDecoder();\n    const lineDecoder = new LineDecoder();\n    const iter = readableStreamAsyncIterable(response.body);\n    for await (const sseChunk of iterSSEChunks(iter)) {\n        for (const line of lineDecoder.decode(sseChunk)) {\n            const sse = sseDecoder.decode(line);\n            if (sse)\n                yield sse;\n        }\n    }\n    for (const line of lineDecoder.flush()) {\n        const sse = sseDecoder.decode(line);\n        if (sse)\n            yield sse;\n    }\n}\n/**\n * Given an async iterable iterator, iterates over it and yields full\n * SSE chunks, i.e. yields when a double new-line is encountered.\n */\nasync function* iterSSEChunks(iterator) {\n    let data = new Uint8Array();\n    for await (const chunk of iterator) {\n        if (chunk == null) {\n            continue;\n        }\n        const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n            : typeof chunk === 'string' ? new TextEncoder().encode(chunk)\n                : chunk;\n        let newData = new Uint8Array(data.length + binaryChunk.length);\n        newData.set(data);\n        newData.set(binaryChunk, data.length);\n        data = newData;\n        let patternIndex;\n        while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {\n            yield data.slice(0, patternIndex);\n            data = data.slice(patternIndex);\n        }\n    }\n    if (data.length > 0) {\n        yield data;\n    }\n}\nfunction findDoubleNewlineIndex(buffer) {\n    // This function searches the buffer for the end patterns (\\r\\r, \\n\\n, \\r\\n\\r\\n)\n    // and returns the index right after the first occurrence of any pattern,\n    // or -1 if none of the patterns are found.\n    const newline = 0x0a; // \\n\n    const carriage = 0x0d; // \\r\n    for (let i = 0; i < buffer.length - 2; i++) {\n        if (buffer[i] === newline && buffer[i + 1] === newline) {\n            // \\n\\n\n            return i + 2;\n        }\n        if (buffer[i] === carriage && buffer[i + 1] === carriage) {\n            // \\r\\r\n            return i + 2;\n        }\n        if (buffer[i] === carriage &&\n            buffer[i + 1] === newline &&\n            i + 3 < buffer.length &&\n            buffer[i + 2] === carriage &&\n            buffer[i + 3] === newline) {\n            // \\r\\n\\r\\n\n            return i + 4;\n        }\n    }\n    return -1;\n}\nclass SSEDecoder {\n    constructor() {\n        this.event = null;\n        this.data = [];\n        this.chunks = [];\n    }\n    decode(line) {\n        if (line.endsWith('\\r')) {\n            line = line.substring(0, line.length - 1);\n        }\n        if (!line) {\n            // empty line and we didn't previously encounter any messages\n            if (!this.event && !this.data.length)\n                return null;\n            const sse = {\n                event: this.event,\n                data: this.data.join('\\n'),\n                raw: this.chunks,\n            };\n            this.event = null;\n            this.data = [];\n            this.chunks = [];\n            return sse;\n        }\n        this.chunks.push(line);\n        if (line.startsWith(':')) {\n            return null;\n        }\n        let [fieldname, _, value] = partition(line, ':');\n        if (value.startsWith(' ')) {\n            value = value.substring(1);\n        }\n        if (fieldname === 'event') {\n            this.event = value;\n        }\n        else if (fieldname === 'data') {\n            this.data.push(value);\n        }\n        return null;\n    }\n}\n/**\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\n * reading lines from text.\n *\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\n */\nclass LineDecoder {\n    constructor() {\n        this.buffer = [];\n        this.trailingCR = false;\n    }\n    decode(chunk) {\n        let text = this.decodeText(chunk);\n        if (this.trailingCR) {\n            text = '\\r' + text;\n            this.trailingCR = false;\n        }\n        if (text.endsWith('\\r')) {\n            this.trailingCR = true;\n            text = text.slice(0, -1);\n        }\n        if (!text) {\n            return [];\n        }\n        const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || '');\n        let lines = text.split(LineDecoder.NEWLINE_REGEXP);\n        // if there is a trailing new line then the last entry will be an empty\n        // string which we don't care about\n        if (trailingNewline) {\n            lines.pop();\n        }\n        if (lines.length === 1 && !trailingNewline) {\n            this.buffer.push(lines[0]);\n            return [];\n        }\n        if (this.buffer.length > 0) {\n            lines = [this.buffer.join('') + lines[0], ...lines.slice(1)];\n            this.buffer = [];\n        }\n        if (!trailingNewline) {\n            this.buffer = [lines.pop() || ''];\n        }\n        return lines;\n    }\n    decodeText(bytes) {\n        if (bytes == null)\n            return '';\n        if (typeof bytes === 'string')\n            return bytes;\n        // Node:\n        if (typeof Buffer !== 'undefined') {\n            if (bytes instanceof Buffer) {\n                return bytes.toString();\n            }\n            if (bytes instanceof Uint8Array) {\n                return Buffer.from(bytes).toString();\n            }\n            throw new OpenAIError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global \"Buffer\" defined, which this library assumes to be Node. Please report this error.`);\n        }\n        // Browser\n        if (typeof TextDecoder !== 'undefined') {\n            if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {\n                this.textDecoder ?? (this.textDecoder = new TextDecoder('utf8'));\n                return this.textDecoder.decode(bytes);\n            }\n            throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);\n        }\n        throw new OpenAIError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);\n    }\n    flush() {\n        if (!this.buffer.length && !this.trailingCR) {\n            return [];\n        }\n        const lines = [this.buffer.join('')];\n        this.buffer = [];\n        this.trailingCR = false;\n        return lines;\n    }\n}\n// prettier-ignore\nLineDecoder.NEWLINE_CHARS = new Set(['\\n', '\\r']);\nLineDecoder.NEWLINE_REGEXP = /\\r\\n|[\\n\\r]/g;\n/** This is an internal helper function that's just used for testing */\nexport function _decodeChunks(chunks) {\n    const decoder = new LineDecoder();\n    const lines = [];\n    for (const chunk of chunks) {\n        lines.push(...decoder.decode(chunk));\n    }\n    return lines;\n}\nfunction partition(str, delimiter) {\n    const index = str.indexOf(delimiter);\n    if (index !== -1) {\n        return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\n    }\n    return [str, '', ''];\n}\n/**\n * Most browsers don't yet have async iterable support for ReadableStream,\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\n *\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */\nexport function readableStreamAsyncIterable(stream) {\n    if (stream[Symbol.asyncIterator])\n        return stream;\n    const reader = stream.getReader();\n    return {\n        async next() {\n            try {\n                const result = await reader.read();\n                if (result?.done)\n                    reader.releaseLock(); // release lock when stream becomes closed\n                return result;\n            }\n            catch (e) {\n                reader.releaseLock(); // release lock when stream becomes errored\n                throw e;\n            }\n        },\n        async return() {\n            const cancelPromise = reader.cancel();\n            reader.releaseLock();\n            await cancelPromise;\n            return { done: true, value: undefined };\n        },\n        [Symbol.asyncIterator]() {\n            return this;\n        },\n    };\n}\n//# sourceMappingURL=streaming.mjs.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AbstractPage_client;\nimport { VERSION } from \"./version.mjs\";\nimport { Stream } from \"./streaming.mjs\";\nimport { OpenAIError, APIError, APIConnectionError, APIConnectionTimeoutError, APIUserAbortError, } from \"./error.mjs\";\nimport { kind as shimsKind, getDefaultAgent, fetch, } from \"./_shims/index.mjs\";\nimport { isMultipartBody } from \"./uploads.mjs\";\nexport { maybeMultipartFormRequestOptions, multipartFormRequestOptions, createForm, } from \"./uploads.mjs\";\nasync function defaultParseResponse(props) {\n    const { response } = props;\n    if (props.options.stream) {\n        debug('response', response.status, response.url, response.headers, response.body);\n        // Note: there is an invariant here that isn't represented in the type system\n        // that if you set `stream: true` the response type must also be `Stream<T>`\n        if (props.options.__streamClass) {\n            return props.options.__streamClass.fromSSEResponse(response, props.controller);\n        }\n        return Stream.fromSSEResponse(response, props.controller);\n    }\n    // fetch refuses to read the body when the status code is 204.\n    if (response.status === 204) {\n        return null;\n    }\n    if (props.options.__binaryResponse) {\n        return response;\n    }\n    const contentType = response.headers.get('content-type');\n    const isJSON = contentType?.includes('application/json') || contentType?.includes('application/vnd.api+json');\n    if (isJSON) {\n        const json = await response.json();\n        debug('response', response.status, response.url, response.headers, json);\n        return json;\n    }\n    const text = await response.text();\n    debug('response', response.status, response.url, response.headers, text);\n    // TODO handle blob, arraybuffer, other content types, etc.\n    return text;\n}\n/**\n * A subclass of `Promise` providing additional helper methods\n * for interacting with the SDK.\n */\nexport class APIPromise extends Promise {\n    constructor(responsePromise, parseResponse = defaultParseResponse) {\n        super((resolve) => {\n            // this is maybe a bit weird but this has to be a no-op to not implicitly\n            // parse the response body; instead .then, .catch, .finally are overridden\n            // to parse the response\n            resolve(null);\n        });\n        this.responsePromise = responsePromise;\n        this.parseResponse = parseResponse;\n    }\n    _thenUnwrap(transform) {\n        return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props)));\n    }\n    /**\n     * Gets the raw `Response` instance instead of parsing the response\n     * data.\n     *\n     * If you want to parse the response body but still get the `Response`\n     * instance, you can use {@link withResponse()}.\n     *\n     * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\n     * or add one of these imports before your first `import â€¦ from 'openai'`:\n     * - `import 'openai/shims/node'` (if you're running on Node)\n     * - `import 'openai/shims/web'` (otherwise)\n     */\n    asResponse() {\n        return this.responsePromise.then((p) => p.response);\n    }\n    /**\n     * Gets the parsed response data and the raw `Response` instance.\n     *\n     * If you just want to get the raw `Response` instance without parsing it,\n     * you can use {@link asResponse()}.\n     *\n     *\n     * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?\n     * Try setting `\"moduleResolution\": \"NodeNext\"` if you can,\n     * or add one of these imports before your first `import â€¦ from 'openai'`:\n     * - `import 'openai/shims/node'` (if you're running on Node)\n     * - `import 'openai/shims/web'` (otherwise)\n     */\n    async withResponse() {\n        const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\n        return { data, response };\n    }\n    parse() {\n        if (!this.parsedPromise) {\n            this.parsedPromise = this.responsePromise.then(this.parseResponse);\n        }\n        return this.parsedPromise;\n    }\n    then(onfulfilled, onrejected) {\n        return this.parse().then(onfulfilled, onrejected);\n    }\n    catch(onrejected) {\n        return this.parse().catch(onrejected);\n    }\n    finally(onfinally) {\n        return this.parse().finally(onfinally);\n    }\n}\nexport class APIClient {\n    constructor({ baseURL, maxRetries = 2, timeout = 600000, // 10 minutes\n    httpAgent, fetch: overridenFetch, }) {\n        this.baseURL = baseURL;\n        this.maxRetries = validatePositiveInteger('maxRetries', maxRetries);\n        this.timeout = validatePositiveInteger('timeout', timeout);\n        this.httpAgent = httpAgent;\n        this.fetch = overridenFetch ?? fetch;\n    }\n    authHeaders(opts) {\n        return {};\n    }\n    /**\n     * Override this to add your own default headers, for example:\n     *\n     *  {\n     *    ...super.defaultHeaders(),\n     *    Authorization: 'Bearer 123',\n     *  }\n     */\n    defaultHeaders(opts) {\n        return {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            'User-Agent': this.getUserAgent(),\n            ...getPlatformHeaders(),\n            ...this.authHeaders(opts),\n        };\n    }\n    /**\n     * Override this to add your own headers validation:\n     */\n    validateHeaders(headers, customHeaders) { }\n    defaultIdempotencyKey() {\n        return `stainless-node-retry-${uuid4()}`;\n    }\n    get(path, opts) {\n        return this.methodRequest('get', path, opts);\n    }\n    post(path, opts) {\n        return this.methodRequest('post', path, opts);\n    }\n    patch(path, opts) {\n        return this.methodRequest('patch', path, opts);\n    }\n    put(path, opts) {\n        return this.methodRequest('put', path, opts);\n    }\n    delete(path, opts) {\n        return this.methodRequest('delete', path, opts);\n    }\n    methodRequest(method, path, opts) {\n        return this.request(Promise.resolve(opts).then((opts) => ({ method, path, ...opts })));\n    }\n    getAPIList(path, Page, opts) {\n        return this.requestAPIList(Page, { method: 'get', path, ...opts });\n    }\n    calculateContentLength(body) {\n        if (typeof body === 'string') {\n            if (typeof Buffer !== 'undefined') {\n                return Buffer.byteLength(body, 'utf8').toString();\n            }\n            if (typeof TextEncoder !== 'undefined') {\n                const encoder = new TextEncoder();\n                const encoded = encoder.encode(body);\n                return encoded.length.toString();\n            }\n        }\n        return null;\n    }\n    buildRequest(options) {\n        const { method, path, query, headers: headers = {} } = options;\n        const body = isMultipartBody(options.body) ? options.body.body\n            : options.body ? JSON.stringify(options.body, null, 2)\n                : null;\n        const contentLength = this.calculateContentLength(body);\n        const url = this.buildURL(path, query);\n        if ('timeout' in options)\n            validatePositiveInteger('timeout', options.timeout);\n        const timeout = options.timeout ?? this.timeout;\n        const httpAgent = options.httpAgent ?? this.httpAgent ?? getDefaultAgent(url);\n        const minAgentTimeout = timeout + 1000;\n        if (typeof httpAgent?.options?.timeout === 'number' &&\n            minAgentTimeout > (httpAgent.options.timeout ?? 0)) {\n            // Allow any given request to bump our agent active socket timeout.\n            // This may seem strange, but leaking active sockets should be rare and not particularly problematic,\n            // and without mutating agent we would need to create more of them.\n            // This tradeoff optimizes for performance.\n            httpAgent.options.timeout = minAgentTimeout;\n        }\n        if (this.idempotencyHeader && method !== 'get') {\n            if (!options.idempotencyKey)\n                options.idempotencyKey = this.defaultIdempotencyKey();\n            headers[this.idempotencyHeader] = options.idempotencyKey;\n        }\n        const reqHeaders = this.buildHeaders({ options, headers, contentLength });\n        const req = {\n            method,\n            ...(body && { body: body }),\n            headers: reqHeaders,\n            ...(httpAgent && { agent: httpAgent }),\n            // @ts-ignore node-fetch uses a custom AbortSignal type that is\n            // not compatible with standard web types\n            signal: options.signal ?? null,\n        };\n        return { req, url, timeout };\n    }\n    buildHeaders({ options, headers, contentLength, }) {\n        const reqHeaders = {};\n        if (contentLength) {\n            reqHeaders['content-length'] = contentLength;\n        }\n        const defaultHeaders = this.defaultHeaders(options);\n        applyHeadersMut(reqHeaders, defaultHeaders);\n        applyHeadersMut(reqHeaders, headers);\n        // let builtin fetch set the Content-Type for multipart bodies\n        if (isMultipartBody(options.body) && shimsKind !== 'node') {\n            delete reqHeaders['content-type'];\n        }\n        this.validateHeaders(reqHeaders, headers);\n        return reqHeaders;\n    }\n    /**\n     * Used as a callback for mutating the given `FinalRequestOptions` object.\n     */\n    async prepareOptions(options) { }\n    /**\n     * Used as a callback for mutating the given `RequestInit` object.\n     *\n     * This is useful for cases where you want to add certain headers based off of\n     * the request properties, e.g. `method` or `url`.\n     */\n    async prepareRequest(request, { url, options }) { }\n    parseHeaders(headers) {\n        return (!headers ? {}\n            : Symbol.iterator in headers ?\n                Object.fromEntries(Array.from(headers).map((header) => [...header]))\n                : { ...headers });\n    }\n    makeStatusError(status, error, message, headers) {\n        return APIError.generate(status, error, message, headers);\n    }\n    request(options, remainingRetries = null) {\n        return new APIPromise(this.makeRequest(options, remainingRetries));\n    }\n    async makeRequest(optionsInput, retriesRemaining) {\n        const options = await optionsInput;\n        if (retriesRemaining == null) {\n            retriesRemaining = options.maxRetries ?? this.maxRetries;\n        }\n        await this.prepareOptions(options);\n        const { req, url, timeout } = this.buildRequest(options);\n        await this.prepareRequest(req, { url, options });\n        debug('request', url, options, req.headers);\n        if (options.signal?.aborted) {\n            throw new APIUserAbortError();\n        }\n        const controller = new AbortController();\n        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\n        if (response instanceof Error) {\n            if (options.signal?.aborted) {\n                throw new APIUserAbortError();\n            }\n            if (retriesRemaining) {\n                return this.retryRequest(options, retriesRemaining);\n            }\n            if (response.name === 'AbortError') {\n                throw new APIConnectionTimeoutError();\n            }\n            throw new APIConnectionError({ cause: response });\n        }\n        const responseHeaders = createResponseHeaders(response.headers);\n        if (!response.ok) {\n            if (retriesRemaining && this.shouldRetry(response)) {\n                const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n                debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders);\n                return this.retryRequest(options, retriesRemaining, responseHeaders);\n            }\n            const errText = await response.text().catch((e) => castToError(e).message);\n            const errJSON = safeJSON(errText);\n            const errMessage = errJSON ? undefined : errText;\n            const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;\n            debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);\n            const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);\n            throw err;\n        }\n        return { response, options, controller };\n    }\n    requestAPIList(Page, options) {\n        const request = this.makeRequest(options, null);\n        return new PagePromise(this, request, Page);\n    }\n    buildURL(path, query) {\n        const url = isAbsoluteURL(path) ?\n            new URL(path)\n            : new URL(this.baseURL + (this.baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\n        const defaultQuery = this.defaultQuery();\n        if (!isEmptyObj(defaultQuery)) {\n            query = { ...defaultQuery, ...query };\n        }\n        if (typeof query === 'object' && query && !Array.isArray(query)) {\n            url.search = this.stringifyQuery(query);\n        }\n        return url.toString();\n    }\n    stringifyQuery(query) {\n        return Object.entries(query)\n            .filter(([_, value]) => typeof value !== 'undefined')\n            .map(([key, value]) => {\n            if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n                return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n            }\n            if (value === null) {\n                return `${encodeURIComponent(key)}=`;\n            }\n            throw new OpenAIError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);\n        })\n            .join('&');\n    }\n    async fetchWithTimeout(url, init, ms, controller) {\n        const { signal, ...options } = init || {};\n        if (signal)\n            signal.addEventListener('abort', () => controller.abort());\n        const timeout = setTimeout(() => controller.abort(), ms);\n        return (this.getRequestClient()\n            // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\n            .fetch.call(undefined, url, { signal: controller.signal, ...options })\n            .finally(() => {\n            clearTimeout(timeout);\n        }));\n    }\n    getRequestClient() {\n        return { fetch: this.fetch };\n    }\n    shouldRetry(response) {\n        // Note this is not a standard header.\n        const shouldRetryHeader = response.headers.get('x-should-retry');\n        // If the server explicitly says whether or not to retry, obey.\n        if (shouldRetryHeader === 'true')\n            return true;\n        if (shouldRetryHeader === 'false')\n            return false;\n        // Retry on request timeouts.\n        if (response.status === 408)\n            return true;\n        // Retry on lock timeouts.\n        if (response.status === 409)\n            return true;\n        // Retry on rate limits.\n        if (response.status === 429)\n            return true;\n        // Retry internal errors.\n        if (response.status >= 500)\n            return true;\n        return false;\n    }\n    async retryRequest(options, retriesRemaining, responseHeaders) {\n        let timeoutMillis;\n        // Note the `retry-after-ms` header may not be standard, but is a good idea and we'd like proactive support for it.\n        const retryAfterMillisHeader = responseHeaders?.['retry-after-ms'];\n        if (retryAfterMillisHeader) {\n            const timeoutMs = parseFloat(retryAfterMillisHeader);\n            if (!Number.isNaN(timeoutMs)) {\n                timeoutMillis = timeoutMs;\n            }\n        }\n        // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\n        const retryAfterHeader = responseHeaders?.['retry-after'];\n        if (retryAfterHeader && !timeoutMillis) {\n            const timeoutSeconds = parseFloat(retryAfterHeader);\n            if (!Number.isNaN(timeoutSeconds)) {\n                timeoutMillis = timeoutSeconds * 1000;\n            }\n            else {\n                timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\n            }\n        }\n        // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\n        // just do what it says, but otherwise calculate a default\n        if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1000)) {\n            const maxRetries = options.maxRetries ?? this.maxRetries;\n            timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\n        }\n        await sleep(timeoutMillis);\n        return this.makeRequest(options, retriesRemaining - 1);\n    }\n    calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {\n        const initialRetryDelay = 0.5;\n        const maxRetryDelay = 8.0;\n        const numRetries = maxRetries - retriesRemaining;\n        // Apply exponential backoff, but not more than the max.\n        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\n        // Apply some jitter, take up to at most 25 percent of the retry time.\n        const jitter = 1 - Math.random() * 0.25;\n        return sleepSeconds * jitter * 1000;\n    }\n    getUserAgent() {\n        return `${this.constructor.name}/JS ${VERSION}`;\n    }\n}\nexport class AbstractPage {\n    constructor(client, response, body, options) {\n        _AbstractPage_client.set(this, void 0);\n        __classPrivateFieldSet(this, _AbstractPage_client, client, \"f\");\n        this.options = options;\n        this.response = response;\n        this.body = body;\n    }\n    hasNextPage() {\n        const items = this.getPaginatedItems();\n        if (!items.length)\n            return false;\n        return this.nextPageInfo() != null;\n    }\n    async getNextPage() {\n        const nextInfo = this.nextPageInfo();\n        if (!nextInfo) {\n            throw new OpenAIError('No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.');\n        }\n        const nextOptions = { ...this.options };\n        if ('params' in nextInfo && typeof nextOptions.query === 'object') {\n            nextOptions.query = { ...nextOptions.query, ...nextInfo.params };\n        }\n        else if ('url' in nextInfo) {\n            const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];\n            for (const [key, value] of params) {\n                nextInfo.url.searchParams.set(key, value);\n            }\n            nextOptions.query = undefined;\n            nextOptions.path = nextInfo.url.toString();\n        }\n        return await __classPrivateFieldGet(this, _AbstractPage_client, \"f\").requestAPIList(this.constructor, nextOptions);\n    }\n    async *iterPages() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let page = this;\n        yield page;\n        while (page.hasNextPage()) {\n            page = await page.getNextPage();\n            yield page;\n        }\n    }\n    async *[(_AbstractPage_client = new WeakMap(), Symbol.asyncIterator)]() {\n        for await (const page of this.iterPages()) {\n            for (const item of page.getPaginatedItems()) {\n                yield item;\n            }\n        }\n    }\n}\n/**\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\n *\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\n *\n *    for await (const item of client.items.list()) {\n *      console.log(item)\n *    }\n */\nexport class PagePromise extends APIPromise {\n    constructor(client, request, Page) {\n        super(request, async (props) => new Page(client, props.response, await defaultParseResponse(props), props.options));\n    }\n    /**\n     * Allow auto-paginating iteration on an unawaited list call, eg:\n     *\n     *    for await (const item of client.items.list()) {\n     *      console.log(item)\n     *    }\n     */\n    async *[Symbol.asyncIterator]() {\n        const page = await this;\n        for await (const item of page) {\n            yield item;\n        }\n    }\n}\nexport const createResponseHeaders = (headers) => {\n    return new Proxy(Object.fromEntries(\n    // @ts-ignore\n    headers.entries()), {\n        get(target, name) {\n            const key = name.toString();\n            return target[key.toLowerCase()] || target[key];\n        },\n    });\n};\n// This is required so that we can determine if a given object matches the RequestOptions\n// type at runtime. While this requires duplication, it is enforced by the TypeScript\n// compiler such that any missing / extraneous keys will cause an error.\nconst requestOptionsKeys = {\n    method: true,\n    path: true,\n    query: true,\n    body: true,\n    headers: true,\n    maxRetries: true,\n    stream: true,\n    timeout: true,\n    httpAgent: true,\n    signal: true,\n    idempotencyKey: true,\n    __binaryResponse: true,\n    __streamClass: true,\n};\nexport const isRequestOptions = (obj) => {\n    return (typeof obj === 'object' &&\n        obj !== null &&\n        !isEmptyObj(obj) &&\n        Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k)));\n};\nconst getPlatformProperties = () => {\n    if (typeof Deno !== 'undefined' && Deno.build != null) {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': normalizePlatform(Deno.build.os),\n            'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n            'X-Stainless-Runtime': 'deno',\n            'X-Stainless-Runtime-Version': typeof Deno.version === 'string' ? Deno.version : Deno.version?.deno ?? 'unknown',\n        };\n    }\n    if (typeof EdgeRuntime !== 'undefined') {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': 'Unknown',\n            'X-Stainless-Arch': `other:${EdgeRuntime}`,\n            'X-Stainless-Runtime': 'edge',\n            'X-Stainless-Runtime-Version': process.version,\n        };\n    }\n    // Check if Node.js\n    if (Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]') {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': normalizePlatform(process.platform),\n            'X-Stainless-Arch': normalizeArch(process.arch),\n            'X-Stainless-Runtime': 'node',\n            'X-Stainless-Runtime-Version': process.version,\n        };\n    }\n    const browserInfo = getBrowserInfo();\n    if (browserInfo) {\n        return {\n            'X-Stainless-Lang': 'js',\n            'X-Stainless-Package-Version': VERSION,\n            'X-Stainless-OS': 'Unknown',\n            'X-Stainless-Arch': 'unknown',\n            'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\n            'X-Stainless-Runtime-Version': browserInfo.version,\n        };\n    }\n    // TODO add support for Cloudflare workers, etc.\n    return {\n        'X-Stainless-Lang': 'js',\n        'X-Stainless-Package-Version': VERSION,\n        'X-Stainless-OS': 'Unknown',\n        'X-Stainless-Arch': 'unknown',\n        'X-Stainless-Runtime': 'unknown',\n        'X-Stainless-Runtime-Version': 'unknown',\n    };\n};\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo() {\n    if (typeof navigator === 'undefined' || !navigator) {\n        return null;\n    }\n    // NOTE: The order matters here!\n    const browserPatterns = [\n        { key: 'edge', pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'ie', pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'ie', pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'chrome', pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'firefox', pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n        { key: 'safari', pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\n    ];\n    // Find the FIRST matching browser\n    for (const { key, pattern } of browserPatterns) {\n        const match = pattern.exec(navigator.userAgent);\n        if (match) {\n            const major = match[1] || 0;\n            const minor = match[2] || 0;\n            const patch = match[3] || 0;\n            return { browser: key, version: `${major}.${minor}.${patch}` };\n        }\n    }\n    return null;\n}\nconst normalizeArch = (arch) => {\n    // Node docs:\n    // - https://nodejs.org/api/process.html#processarch\n    // Deno docs:\n    // - https://doc.deno.land/deno/stable/~/Deno.build\n    if (arch === 'x32')\n        return 'x32';\n    if (arch === 'x86_64' || arch === 'x64')\n        return 'x64';\n    if (arch === 'arm')\n        return 'arm';\n    if (arch === 'aarch64' || arch === 'arm64')\n        return 'arm64';\n    if (arch)\n        return `other:${arch}`;\n    return 'unknown';\n};\nconst normalizePlatform = (platform) => {\n    // Node platforms:\n    // - https://nodejs.org/api/process.html#processplatform\n    // Deno platforms:\n    // - https://doc.deno.land/deno/stable/~/Deno.build\n    // - https://github.com/denoland/deno/issues/14799\n    platform = platform.toLowerCase();\n    // NOTE: this iOS check is untested and may not work\n    // Node does not work natively on IOS, there is a fork at\n    // https://github.com/nodejs-mobile/nodejs-mobile\n    // however it is unknown at the time of writing how to detect if it is running\n    if (platform.includes('ios'))\n        return 'iOS';\n    if (platform === 'android')\n        return 'Android';\n    if (platform === 'darwin')\n        return 'MacOS';\n    if (platform === 'win32')\n        return 'Windows';\n    if (platform === 'freebsd')\n        return 'FreeBSD';\n    if (platform === 'openbsd')\n        return 'OpenBSD';\n    if (platform === 'linux')\n        return 'Linux';\n    if (platform)\n        return `Other:${platform}`;\n    return 'Unknown';\n};\nlet _platformHeaders;\nconst getPlatformHeaders = () => {\n    return (_platformHeaders ?? (_platformHeaders = getPlatformProperties()));\n};\nexport const safeJSON = (text) => {\n    try {\n        return JSON.parse(text);\n    }\n    catch (err) {\n        return undefined;\n    }\n};\n// https://stackoverflow.com/a/19709846\nconst startsWithSchemeRegexp = new RegExp('^(?:[a-z]+:)?//', 'i');\nconst isAbsoluteURL = (url) => {\n    return startsWithSchemeRegexp.test(url);\n};\nexport const sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\nconst validatePositiveInteger = (name, n) => {\n    if (typeof n !== 'number' || !Number.isInteger(n)) {\n        throw new OpenAIError(`${name} must be an integer`);\n    }\n    if (n < 0) {\n        throw new OpenAIError(`${name} must be a positive integer`);\n    }\n    return n;\n};\nexport const castToError = (err) => {\n    if (err instanceof Error)\n        return err;\n    return new Error(err);\n};\nexport const ensurePresent = (value) => {\n    if (value == null)\n        throw new OpenAIError(`Expected a value to be given but received ${value} instead.`);\n    return value;\n};\n/**\n * Read an environment variable.\n *\n * Trims beginning and trailing whitespace.\n *\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\n */\nexport const readEnv = (env) => {\n    if (typeof process !== 'undefined') {\n        return process.env?.[env]?.trim() ?? undefined;\n    }\n    if (typeof Deno !== 'undefined') {\n        return Deno.env?.get?.(env)?.trim();\n    }\n    return undefined;\n};\nexport const coerceInteger = (value) => {\n    if (typeof value === 'number')\n        return Math.round(value);\n    if (typeof value === 'string')\n        return parseInt(value, 10);\n    throw new OpenAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\nexport const coerceFloat = (value) => {\n    if (typeof value === 'number')\n        return value;\n    if (typeof value === 'string')\n        return parseFloat(value);\n    throw new OpenAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\nexport const coerceBoolean = (value) => {\n    if (typeof value === 'boolean')\n        return value;\n    if (typeof value === 'string')\n        return value === 'true';\n    return Boolean(value);\n};\nexport const maybeCoerceInteger = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceInteger(value);\n};\nexport const maybeCoerceFloat = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceFloat(value);\n};\nexport const maybeCoerceBoolean = (value) => {\n    if (value === undefined) {\n        return undefined;\n    }\n    return coerceBoolean(value);\n};\n// https://stackoverflow.com/a/34491287\nexport function isEmptyObj(obj) {\n    if (!obj)\n        return true;\n    for (const _k in obj)\n        return false;\n    return true;\n}\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\nexport function hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n/**\n * Copies headers from \"newHeaders\" onto \"targetHeaders\",\n * using lower-case for all properties,\n * ignoring any keys with undefined values,\n * and deleting any keys with null values.\n */\nfunction applyHeadersMut(targetHeaders, newHeaders) {\n    for (const k in newHeaders) {\n        if (!hasOwn(newHeaders, k))\n            continue;\n        const lowerKey = k.toLowerCase();\n        if (!lowerKey)\n            continue;\n        const val = newHeaders[k];\n        if (val === null) {\n            delete targetHeaders[lowerKey];\n        }\n        else if (val !== undefined) {\n            targetHeaders[lowerKey] = val;\n        }\n    }\n}\nexport function debug(action, ...args) {\n    if (typeof process !== 'undefined' && process?.env?.['DEBUG'] === 'true') {\n        console.log(`OpenAI:DEBUG:${action}`, ...args);\n    }\n}\n/**\n * https://stackoverflow.com/a/2117523\n */\nconst uuid4 = () => {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\nexport const isRunningInBrowser = () => {\n    return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n        // @ts-ignore\n        typeof window.document !== 'undefined' &&\n        // @ts-ignore\n        typeof navigator !== 'undefined');\n};\nexport const isHeadersProtocol = (headers) => {\n    return typeof headers?.get === 'function';\n};\nexport const getRequiredHeader = (headers, header) => {\n    const lowerCasedHeader = header.toLowerCase();\n    if (isHeadersProtocol(headers)) {\n        // to deal with the case where the header looks like Stainless-Event-Id\n        const intercapsHeader = header[0]?.toUpperCase() +\n            header.substring(1).replace(/([^\\w])(\\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());\n        for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {\n            const value = headers.get(key);\n            if (value) {\n                return value;\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(headers)) {\n        if (key.toLowerCase() === lowerCasedHeader) {\n            if (Array.isArray(value)) {\n                if (value.length <= 1)\n                    return value[0];\n                console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);\n                return value[0];\n            }\n            return value;\n        }\n    }\n    throw new Error(`Could not find ${header} header`);\n};\n/**\n * Encodes a string to Base64 format.\n */\nexport const toBase64 = (str) => {\n    if (!str)\n        return '';\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str).toString('base64');\n    }\n    if (typeof btoa !== 'undefined') {\n        return btoa(str);\n    }\n    throw new OpenAIError('Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined');\n};\nexport function isObj(obj) {\n    return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\n//# sourceMappingURL=core.mjs.map","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { castToError } from \"./core.mjs\";\nexport class OpenAIError extends Error {\n}\nexport class APIError extends OpenAIError {\n    constructor(status, error, message, headers) {\n        super(`${APIError.makeMessage(status, error, message)}`);\n        this.status = status;\n        this.headers = headers;\n        this.request_id = headers?.['x-request-id'];\n        const data = error;\n        this.error = data;\n        this.code = data?.['code'];\n        this.param = data?.['param'];\n        this.type = data?.['type'];\n    }\n    static makeMessage(status, error, message) {\n        const msg = error?.message ?\n            typeof error.message === 'string' ?\n                error.message\n                : JSON.stringify(error.message)\n            : error ? JSON.stringify(error)\n                : message;\n        if (status && msg) {\n            return `${status} ${msg}`;\n        }\n        if (status) {\n            return `${status} status code (no body)`;\n        }\n        if (msg) {\n            return msg;\n        }\n        return '(no status code or body)';\n    }\n    static generate(status, errorResponse, message, headers) {\n        if (!status) {\n            return new APIConnectionError({ cause: castToError(errorResponse) });\n        }\n        const error = errorResponse?.['error'];\n        if (status === 400) {\n            return new BadRequestError(status, error, message, headers);\n        }\n        if (status === 401) {\n            return new AuthenticationError(status, error, message, headers);\n        }\n        if (status === 403) {\n            return new PermissionDeniedError(status, error, message, headers);\n        }\n        if (status === 404) {\n            return new NotFoundError(status, error, message, headers);\n        }\n        if (status === 409) {\n            return new ConflictError(status, error, message, headers);\n        }\n        if (status === 422) {\n            return new UnprocessableEntityError(status, error, message, headers);\n        }\n        if (status === 429) {\n            return new RateLimitError(status, error, message, headers);\n        }\n        if (status >= 500) {\n            return new InternalServerError(status, error, message, headers);\n        }\n        return new APIError(status, error, message, headers);\n    }\n}\nexport class APIUserAbortError extends APIError {\n    constructor({ message } = {}) {\n        super(undefined, undefined, message || 'Request was aborted.', undefined);\n        this.status = undefined;\n    }\n}\nexport class APIConnectionError extends APIError {\n    constructor({ message, cause }) {\n        super(undefined, undefined, message || 'Connection error.', undefined);\n        this.status = undefined;\n        // in some environments the 'cause' property is already declared\n        // @ts-ignore\n        if (cause)\n            this.cause = cause;\n    }\n}\nexport class APIConnectionTimeoutError extends APIConnectionError {\n    constructor({ message } = {}) {\n        super({ message: message ?? 'Request timed out.' });\n    }\n}\nexport class BadRequestError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 400;\n    }\n}\nexport class AuthenticationError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 401;\n    }\n}\nexport class PermissionDeniedError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 403;\n    }\n}\nexport class NotFoundError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 404;\n    }\n}\nexport class ConflictError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 409;\n    }\n}\nexport class UnprocessableEntityError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 422;\n    }\n}\nexport class RateLimitError extends APIError {\n    constructor() {\n        super(...arguments);\n        this.status = 429;\n    }\n}\nexport class InternalServerError extends APIError {\n}\n//# sourceMappingURL=error.mjs.map","export function isRunnableFunctionWithParse(fn) {\n    return typeof fn.parse === 'function';\n}\n/**\n * This is helper class for passing a `function` and `parse` where the `function`\n * argument type matches the `parse` return type.\n *\n * @deprecated - please use ParsingToolFunction instead.\n */\nexport class ParsingFunction {\n    constructor(input) {\n        this.function = input.function;\n        this.parse = input.parse;\n        this.parameters = input.parameters;\n        this.description = input.description;\n        this.name = input.name;\n    }\n}\n/**\n * This is helper class for passing a `function` and `parse` where the `function`\n * argument type matches the `parse` return type.\n */\nexport class ParsingToolFunction {\n    constructor(input) {\n        this.type = 'function';\n        this.function = input;\n    }\n}\n//# sourceMappingURL=RunnableFunction.mjs.map","export const isAssistantMessage = (message) => {\n    return message?.role === 'assistant';\n};\nexport const isFunctionMessage = (message) => {\n    return message?.role === 'function';\n};\nexport const isToolMessage = (message) => {\n    return message?.role === 'tool';\n};\nexport function isPresent(obj) {\n    return obj != null;\n}\n//# sourceMappingURL=chatCompletionUtils.mjs.map","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AbstractChatCompletionRunner_instances, _AbstractChatCompletionRunner_connectedPromise, _AbstractChatCompletionRunner_resolveConnectedPromise, _AbstractChatCompletionRunner_rejectConnectedPromise, _AbstractChatCompletionRunner_endPromise, _AbstractChatCompletionRunner_resolveEndPromise, _AbstractChatCompletionRunner_rejectEndPromise, _AbstractChatCompletionRunner_listeners, _AbstractChatCompletionRunner_ended, _AbstractChatCompletionRunner_errored, _AbstractChatCompletionRunner_aborted, _AbstractChatCompletionRunner_catchingPromiseCreated, _AbstractChatCompletionRunner_getFinalContent, _AbstractChatCompletionRunner_getFinalMessage, _AbstractChatCompletionRunner_getFinalFunctionCall, _AbstractChatCompletionRunner_getFinalFunctionCallResult, _AbstractChatCompletionRunner_calculateTotalUsage, _AbstractChatCompletionRunner_handleError, _AbstractChatCompletionRunner_validateParams, _AbstractChatCompletionRunner_stringifyFunctionCallResult;\nimport { APIUserAbortError, OpenAIError } from 'openai/error';\nimport { isRunnableFunctionWithParse, } from \"./RunnableFunction.mjs\";\nimport { isAssistantMessage, isFunctionMessage, isToolMessage } from \"./chatCompletionUtils.mjs\";\nconst DEFAULT_MAX_CHAT_COMPLETIONS = 10;\nexport class AbstractChatCompletionRunner {\n    constructor() {\n        _AbstractChatCompletionRunner_instances.add(this);\n        this.controller = new AbortController();\n        _AbstractChatCompletionRunner_connectedPromise.set(this, void 0);\n        _AbstractChatCompletionRunner_resolveConnectedPromise.set(this, () => { });\n        _AbstractChatCompletionRunner_rejectConnectedPromise.set(this, () => { });\n        _AbstractChatCompletionRunner_endPromise.set(this, void 0);\n        _AbstractChatCompletionRunner_resolveEndPromise.set(this, () => { });\n        _AbstractChatCompletionRunner_rejectEndPromise.set(this, () => { });\n        _AbstractChatCompletionRunner_listeners.set(this, {});\n        this._chatCompletions = [];\n        this.messages = [];\n        _AbstractChatCompletionRunner_ended.set(this, false);\n        _AbstractChatCompletionRunner_errored.set(this, false);\n        _AbstractChatCompletionRunner_aborted.set(this, false);\n        _AbstractChatCompletionRunner_catchingPromiseCreated.set(this, false);\n        _AbstractChatCompletionRunner_handleError.set(this, (error) => {\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_errored, true, \"f\");\n            if (error instanceof Error && error.name === 'AbortError') {\n                error = new APIUserAbortError();\n            }\n            if (error instanceof APIUserAbortError) {\n                __classPrivateFieldSet(this, _AbstractChatCompletionRunner_aborted, true, \"f\");\n                return this._emit('abort', error);\n            }\n            if (error instanceof OpenAIError) {\n                return this._emit('error', error);\n            }\n            if (error instanceof Error) {\n                const openAIError = new OpenAIError(error.message);\n                // @ts-ignore\n                openAIError.cause = error;\n                return this._emit('error', openAIError);\n            }\n            return this._emit('error', new OpenAIError(String(error)));\n        });\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_connectedPromise, new Promise((resolve, reject) => {\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_resolveConnectedPromise, resolve, \"f\");\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, reject, \"f\");\n        }), \"f\");\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_endPromise, new Promise((resolve, reject) => {\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_resolveEndPromise, resolve, \"f\");\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_rejectEndPromise, reject, \"f\");\n        }), \"f\");\n        // Don't let these promises cause unhandled rejection errors.\n        // we will manually cause an unhandled rejection error later\n        // if the user hasn't registered any error listener or called\n        // any promise-returning method.\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_connectedPromise, \"f\").catch(() => { });\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_endPromise, \"f\").catch(() => { });\n    }\n    _run(executor) {\n        // Unfortunately if we call `executor()` immediately we get runtime errors about\n        // references to `this` before the `super()` constructor call returns.\n        setTimeout(() => {\n            executor().then(() => {\n                this._emitFinal();\n                this._emit('end');\n            }, __classPrivateFieldGet(this, _AbstractChatCompletionRunner_handleError, \"f\"));\n        }, 0);\n    }\n    _addChatCompletion(chatCompletion) {\n        this._chatCompletions.push(chatCompletion);\n        this._emit('chatCompletion', chatCompletion);\n        const message = chatCompletion.choices[0]?.message;\n        if (message)\n            this._addMessage(message);\n        return chatCompletion;\n    }\n    _addMessage(message, emit = true) {\n        if (!('content' in message))\n            message.content = null;\n        this.messages.push(message);\n        if (emit) {\n            this._emit('message', message);\n            if ((isFunctionMessage(message) || isToolMessage(message)) && message.content) {\n                // Note, this assumes that {role: 'tool', content: â€¦} is always the result of a call of tool of type=function.\n                this._emit('functionCallResult', message.content);\n            }\n            else if (isAssistantMessage(message) && message.function_call) {\n                this._emit('functionCall', message.function_call);\n            }\n            else if (isAssistantMessage(message) && message.tool_calls) {\n                for (const tool_call of message.tool_calls) {\n                    if (tool_call.type === 'function') {\n                        this._emit('functionCall', tool_call.function);\n                    }\n                }\n            }\n        }\n    }\n    _connected() {\n        if (this.ended)\n            return;\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_resolveConnectedPromise, \"f\").call(this);\n        this._emit('connect');\n    }\n    get ended() {\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_ended, \"f\");\n    }\n    get errored() {\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_errored, \"f\");\n    }\n    get aborted() {\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_aborted, \"f\");\n    }\n    abort() {\n        this.controller.abort();\n    }\n    /**\n     * Adds the listener function to the end of the listeners array for the event.\n     * No checks are made to see if the listener has already been added. Multiple calls passing\n     * the same combination of event and listener will result in the listener being added, and\n     * called, multiple times.\n     * @returns this ChatCompletionStream, so that calls can be chained\n     */\n    on(event, listener) {\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] || (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = []);\n        listeners.push({ listener });\n        return this;\n    }\n    /**\n     * Removes the specified listener from the listener array for the event.\n     * off() will remove, at most, one instance of a listener from the listener array. If any single\n     * listener has been added multiple times to the listener array for the specified event, then\n     * off() must be called multiple times to remove each instance.\n     * @returns this ChatCompletionStream, so that calls can be chained\n     */\n    off(event, listener) {\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event];\n        if (!listeners)\n            return this;\n        const index = listeners.findIndex((l) => l.listener === listener);\n        if (index >= 0)\n            listeners.splice(index, 1);\n        return this;\n    }\n    /**\n     * Adds a one-time listener function for the event. The next time the event is triggered,\n     * this listener is removed and then invoked.\n     * @returns this ChatCompletionStream, so that calls can be chained\n     */\n    once(event, listener) {\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] || (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = []);\n        listeners.push({ listener, once: true });\n        return this;\n    }\n    /**\n     * This is similar to `.once()`, but returns a Promise that resolves the next time\n     * the event is triggered, instead of calling a listener callback.\n     * @returns a Promise that resolves the next time given event is triggered,\n     * or rejects if an error is emitted.  (If you request the 'error' event,\n     * returns a promise that resolves with the error).\n     *\n     * Example:\n     *\n     *   const message = await stream.emitted('message') // rejects if the stream errors\n     */\n    emitted(event) {\n        return new Promise((resolve, reject) => {\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, true, \"f\");\n            if (event !== 'error')\n                this.once('error', reject);\n            this.once(event, resolve);\n        });\n    }\n    async done() {\n        __classPrivateFieldSet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, true, \"f\");\n        await __classPrivateFieldGet(this, _AbstractChatCompletionRunner_endPromise, \"f\");\n    }\n    /**\n     * @returns a promise that resolves with the final ChatCompletion, or rejects\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletion.\n     */\n    async finalChatCompletion() {\n        await this.done();\n        const completion = this._chatCompletions[this._chatCompletions.length - 1];\n        if (!completion)\n            throw new OpenAIError('stream ended without producing a ChatCompletion');\n        return completion;\n    }\n    /**\n     * @returns a promise that resolves with the content of the final ChatCompletionMessage, or rejects\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n     */\n    async finalContent() {\n        await this.done();\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalContent).call(this);\n    }\n    /**\n     * @returns a promise that resolves with the the final assistant ChatCompletionMessage response,\n     * or rejects if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n     */\n    async finalMessage() {\n        await this.done();\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalMessage).call(this);\n    }\n    /**\n     * @returns a promise that resolves with the content of the final FunctionCall, or rejects\n     * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n     */\n    async finalFunctionCall() {\n        await this.done();\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCall).call(this);\n    }\n    async finalFunctionCallResult() {\n        await this.done();\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);\n    }\n    async totalUsage() {\n        await this.done();\n        return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_calculateTotalUsage).call(this);\n    }\n    allChatCompletions() {\n        return [...this._chatCompletions];\n    }\n    _emit(event, ...args) {\n        // make sure we don't emit any events after end\n        if (__classPrivateFieldGet(this, _AbstractChatCompletionRunner_ended, \"f\")) {\n            return;\n        }\n        if (event === 'end') {\n            __classPrivateFieldSet(this, _AbstractChatCompletionRunner_ended, true, \"f\");\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_resolveEndPromise, \"f\").call(this);\n        }\n        const listeners = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event];\n        if (listeners) {\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_listeners, \"f\")[event] = listeners.filter((l) => !l.once);\n            listeners.forEach(({ listener }) => listener(...args));\n        }\n        if (event === 'abort') {\n            const error = args[0];\n            if (!__classPrivateFieldGet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, \"f\") && !listeners?.length) {\n                Promise.reject(error);\n            }\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, \"f\").call(this, error);\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectEndPromise, \"f\").call(this, error);\n            this._emit('end');\n            return;\n        }\n        if (event === 'error') {\n            // NOTE: _emit('error', error) should only be called from #handleError().\n            const error = args[0];\n            if (!__classPrivateFieldGet(this, _AbstractChatCompletionRunner_catchingPromiseCreated, \"f\") && !listeners?.length) {\n                // Trigger an unhandled rejection if the user hasn't registered any error handlers.\n                // If you are seeing stack traces here, make sure to handle errors via either:\n                // - runner.on('error', () => ...)\n                // - await runner.done()\n                // - await runner.finalChatCompletion()\n                // - etc.\n                Promise.reject(error);\n            }\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectConnectedPromise, \"f\").call(this, error);\n            __classPrivateFieldGet(this, _AbstractChatCompletionRunner_rejectEndPromise, \"f\").call(this, error);\n            this._emit('end');\n        }\n    }\n    _emitFinal() {\n        const completion = this._chatCompletions[this._chatCompletions.length - 1];\n        if (completion)\n            this._emit('finalChatCompletion', completion);\n        const finalMessage = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalMessage).call(this);\n        if (finalMessage)\n            this._emit('finalMessage', finalMessage);\n        const finalContent = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalContent).call(this);\n        if (finalContent)\n            this._emit('finalContent', finalContent);\n        const finalFunctionCall = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCall).call(this);\n        if (finalFunctionCall)\n            this._emit('finalFunctionCall', finalFunctionCall);\n        const finalFunctionCallResult = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);\n        if (finalFunctionCallResult != null)\n            this._emit('finalFunctionCallResult', finalFunctionCallResult);\n        if (this._chatCompletions.some((c) => c.usage)) {\n            this._emit('totalUsage', __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_calculateTotalUsage).call(this));\n        }\n    }\n    async _createChatCompletion(completions, params, options) {\n        const signal = options?.signal;\n        if (signal) {\n            if (signal.aborted)\n                this.controller.abort();\n            signal.addEventListener('abort', () => this.controller.abort());\n        }\n        __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_validateParams).call(this, params);\n        const chatCompletion = await completions.create({ ...params, stream: false }, { ...options, signal: this.controller.signal });\n        this._connected();\n        return this._addChatCompletion(chatCompletion);\n    }\n    async _runChatCompletion(completions, params, options) {\n        for (const message of params.messages) {\n            this._addMessage(message, false);\n        }\n        return await this._createChatCompletion(completions, params, options);\n    }\n    async _runFunctions(completions, params, options) {\n        const role = 'function';\n        const { function_call = 'auto', stream, ...restParams } = params;\n        const singleFunctionToCall = typeof function_call !== 'string' && function_call?.name;\n        const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\n        const functionsByName = {};\n        for (const f of params.functions) {\n            functionsByName[f.name || f.function.name] = f;\n        }\n        const functions = params.functions.map((f) => ({\n            name: f.name || f.function.name,\n            parameters: f.parameters,\n            description: f.description,\n        }));\n        for (const message of params.messages) {\n            this._addMessage(message, false);\n        }\n        for (let i = 0; i < maxChatCompletions; ++i) {\n            const chatCompletion = await this._createChatCompletion(completions, {\n                ...restParams,\n                function_call,\n                functions,\n                messages: [...this.messages],\n            }, options);\n            const message = chatCompletion.choices[0]?.message;\n            if (!message) {\n                throw new OpenAIError(`missing message in ChatCompletion response`);\n            }\n            if (!message.function_call)\n                return;\n            const { name, arguments: args } = message.function_call;\n            const fn = functionsByName[name];\n            if (!fn) {\n                const content = `Invalid function_call: ${JSON.stringify(name)}. Available options are: ${functions\n                    .map((f) => JSON.stringify(f.name))\n                    .join(', ')}. Please try again`;\n                this._addMessage({ role, name, content });\n                continue;\n            }\n            else if (singleFunctionToCall && singleFunctionToCall !== name) {\n                const content = `Invalid function_call: ${JSON.stringify(name)}. ${JSON.stringify(singleFunctionToCall)} requested. Please try again`;\n                this._addMessage({ role, name, content });\n                continue;\n            }\n            let parsed;\n            try {\n                parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\n            }\n            catch (error) {\n                this._addMessage({\n                    role,\n                    name,\n                    content: error instanceof Error ? error.message : String(error),\n                });\n                continue;\n            }\n            // @ts-expect-error it can't rule out `never` type.\n            const rawContent = await fn.function(parsed, this);\n            const content = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this, rawContent);\n            this._addMessage({ role, name, content });\n            if (singleFunctionToCall)\n                return;\n        }\n    }\n    async _runTools(completions, params, options) {\n        const role = 'tool';\n        const { tool_choice = 'auto', stream, ...restParams } = params;\n        const singleFunctionToCall = typeof tool_choice !== 'string' && tool_choice?.function?.name;\n        const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\n        const functionsByName = {};\n        for (const f of params.tools) {\n            if (f.type === 'function') {\n                functionsByName[f.function.name || f.function.function.name] = f.function;\n            }\n        }\n        const tools = 'tools' in params ?\n            params.tools.map((t) => t.type === 'function' ?\n                {\n                    type: 'function',\n                    function: {\n                        name: t.function.name || t.function.function.name,\n                        parameters: t.function.parameters,\n                        description: t.function.description,\n                    },\n                }\n                : t)\n            : undefined;\n        for (const message of params.messages) {\n            this._addMessage(message, false);\n        }\n        for (let i = 0; i < maxChatCompletions; ++i) {\n            const chatCompletion = await this._createChatCompletion(completions, {\n                ...restParams,\n                tool_choice,\n                tools,\n                messages: [...this.messages],\n            }, options);\n            const message = chatCompletion.choices[0]?.message;\n            if (!message) {\n                throw new OpenAIError(`missing message in ChatCompletion response`);\n            }\n            if (!message.tool_calls) {\n                return;\n            }\n            for (const tool_call of message.tool_calls) {\n                if (tool_call.type !== 'function')\n                    continue;\n                const tool_call_id = tool_call.id;\n                const { name, arguments: args } = tool_call.function;\n                const fn = functionsByName[name];\n                if (!fn) {\n                    const content = `Invalid tool_call: ${JSON.stringify(name)}. Available options are: ${tools\n                        .map((f) => JSON.stringify(f.function.name))\n                        .join(', ')}. Please try again`;\n                    this._addMessage({ role, tool_call_id, content });\n                    continue;\n                }\n                else if (singleFunctionToCall && singleFunctionToCall !== name) {\n                    const content = `Invalid tool_call: ${JSON.stringify(name)}. ${JSON.stringify(singleFunctionToCall)} requested. Please try again`;\n                    this._addMessage({ role, tool_call_id, content });\n                    continue;\n                }\n                let parsed;\n                try {\n                    parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\n                }\n                catch (error) {\n                    const content = error instanceof Error ? error.message : String(error);\n                    this._addMessage({ role, tool_call_id, content });\n                    continue;\n                }\n                // @ts-expect-error it can't rule out `never` type.\n                const rawContent = await fn.function(parsed, this);\n                const content = __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this, rawContent);\n                this._addMessage({ role, tool_call_id, content });\n                if (singleFunctionToCall) {\n                    return;\n                }\n            }\n        }\n        return;\n    }\n}\n_AbstractChatCompletionRunner_connectedPromise = new WeakMap(), _AbstractChatCompletionRunner_resolveConnectedPromise = new WeakMap(), _AbstractChatCompletionRunner_rejectConnectedPromise = new WeakMap(), _AbstractChatCompletionRunner_endPromise = new WeakMap(), _AbstractChatCompletionRunner_resolveEndPromise = new WeakMap(), _AbstractChatCompletionRunner_rejectEndPromise = new WeakMap(), _AbstractChatCompletionRunner_listeners = new WeakMap(), _AbstractChatCompletionRunner_ended = new WeakMap(), _AbstractChatCompletionRunner_errored = new WeakMap(), _AbstractChatCompletionRunner_aborted = new WeakMap(), _AbstractChatCompletionRunner_catchingPromiseCreated = new WeakMap(), _AbstractChatCompletionRunner_handleError = new WeakMap(), _AbstractChatCompletionRunner_instances = new WeakSet(), _AbstractChatCompletionRunner_getFinalContent = function _AbstractChatCompletionRunner_getFinalContent() {\n    return __classPrivateFieldGet(this, _AbstractChatCompletionRunner_instances, \"m\", _AbstractChatCompletionRunner_getFinalMessage).call(this).content ?? null;\n}, _AbstractChatCompletionRunner_getFinalMessage = function _AbstractChatCompletionRunner_getFinalMessage() {\n    let i = this.messages.length;\n    while (i-- > 0) {\n        const message = this.messages[i];\n        if (isAssistantMessage(message)) {\n            return { ...message, content: message.content ?? null };\n        }\n    }\n    throw new OpenAIError('stream ended without producing a ChatCompletionMessage with role=assistant');\n}, _AbstractChatCompletionRunner_getFinalFunctionCall = function _AbstractChatCompletionRunner_getFinalFunctionCall() {\n    for (let i = this.messages.length - 1; i >= 0; i--) {\n        const message = this.messages[i];\n        if (isAssistantMessage(message) && message?.function_call) {\n            return message.function_call;\n        }\n        if (isAssistantMessage(message) && message?.tool_calls?.length) {\n            return message.tool_calls.at(-1)?.function;\n        }\n    }\n    return;\n}, _AbstractChatCompletionRunner_getFinalFunctionCallResult = function _AbstractChatCompletionRunner_getFinalFunctionCallResult() {\n    for (let i = this.messages.length - 1; i >= 0; i--) {\n        const message = this.messages[i];\n        if (isFunctionMessage(message) && message.content != null) {\n            return message.content;\n        }\n        if (isToolMessage(message) &&\n            message.content != null &&\n            this.messages.some((x) => x.role === 'assistant' &&\n                x.tool_calls?.some((y) => y.type === 'function' && y.id === message.tool_call_id))) {\n            return message.content;\n        }\n    }\n    return;\n}, _AbstractChatCompletionRunner_calculateTotalUsage = function _AbstractChatCompletionRunner_calculateTotalUsage() {\n    const total = {\n        completion_tokens: 0,\n        prompt_tokens: 0,\n        total_tokens: 0,\n    };\n    for (const { usage } of this._chatCompletions) {\n        if (usage) {\n            total.completion_tokens += usage.completion_tokens;\n            total.prompt_tokens += usage.prompt_tokens;\n            total.total_tokens += usage.total_tokens;\n        }\n    }\n    return total;\n}, _AbstractChatCompletionRunner_validateParams = function _AbstractChatCompletionRunner_validateParams(params) {\n    if (params.n != null && params.n > 1) {\n        throw new OpenAIError('ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.');\n    }\n}, _AbstractChatCompletionRunner_stringifyFunctionCallResult = function _AbstractChatCompletionRunner_stringifyFunctionCallResult(rawContent) {\n    return (typeof rawContent === 'string' ? rawContent\n        : rawContent === undefined ? 'undefined'\n            : JSON.stringify(rawContent));\n};\n//# sourceMappingURL=AbstractChatCompletionRunner.mjs.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _ChatCompletionStream_instances, _ChatCompletionStream_currentChatCompletionSnapshot, _ChatCompletionStream_beginRequest, _ChatCompletionStream_addChunk, _ChatCompletionStream_endRequest, _ChatCompletionStream_accumulateChatCompletion;\nimport { OpenAIError, APIUserAbortError } from 'openai/error';\nimport { AbstractChatCompletionRunner, } from \"./AbstractChatCompletionRunner.mjs\";\nimport { Stream } from 'openai/streaming';\nexport class ChatCompletionStream extends AbstractChatCompletionRunner {\n    constructor() {\n        super(...arguments);\n        _ChatCompletionStream_instances.add(this);\n        _ChatCompletionStream_currentChatCompletionSnapshot.set(this, void 0);\n    }\n    get currentChatCompletionSnapshot() {\n        return __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\n    }\n    /**\n     * Intended for use on the frontend, consuming a stream produced with\n     * `.toReadableStream()` on the backend.\n     *\n     * Note that messages sent to the model do not appear in `.on('message')`\n     * in this context.\n     */\n    static fromReadableStream(stream) {\n        const runner = new ChatCompletionStream();\n        runner._run(() => runner._fromReadableStream(stream));\n        return runner;\n    }\n    static createChatCompletion(completions, params, options) {\n        const runner = new ChatCompletionStream();\n        runner._run(() => runner._runChatCompletion(completions, { ...params, stream: true }, { ...options, headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'stream' } }));\n        return runner;\n    }\n    async _createChatCompletion(completions, params, options) {\n        const signal = options?.signal;\n        if (signal) {\n            if (signal.aborted)\n                this.controller.abort();\n            signal.addEventListener('abort', () => this.controller.abort());\n        }\n        __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_beginRequest).call(this);\n        const stream = await completions.create({ ...params, stream: true }, { ...options, signal: this.controller.signal });\n        this._connected();\n        for await (const chunk of stream) {\n            __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_addChunk).call(this, chunk);\n        }\n        if (stream.controller.signal?.aborted) {\n            throw new APIUserAbortError();\n        }\n        return this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\n    }\n    async _fromReadableStream(readableStream, options) {\n        const signal = options?.signal;\n        if (signal) {\n            if (signal.aborted)\n                this.controller.abort();\n            signal.addEventListener('abort', () => this.controller.abort());\n        }\n        __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_beginRequest).call(this);\n        this._connected();\n        const stream = Stream.fromReadableStream(readableStream, this.controller);\n        let chatId;\n        for await (const chunk of stream) {\n            if (chatId && chatId !== chunk.id) {\n                // A new request has been made.\n                this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\n            }\n            __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_addChunk).call(this, chunk);\n            chatId = chunk.id;\n        }\n        if (stream.controller.signal?.aborted) {\n            throw new APIUserAbortError();\n        }\n        return this._addChatCompletion(__classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_endRequest).call(this));\n    }\n    [(_ChatCompletionStream_currentChatCompletionSnapshot = new WeakMap(), _ChatCompletionStream_instances = new WeakSet(), _ChatCompletionStream_beginRequest = function _ChatCompletionStream_beginRequest() {\n        if (this.ended)\n            return;\n        __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, undefined, \"f\");\n    }, _ChatCompletionStream_addChunk = function _ChatCompletionStream_addChunk(chunk) {\n        if (this.ended)\n            return;\n        const completion = __classPrivateFieldGet(this, _ChatCompletionStream_instances, \"m\", _ChatCompletionStream_accumulateChatCompletion).call(this, chunk);\n        this._emit('chunk', chunk, completion);\n        const delta = chunk.choices[0]?.delta?.content;\n        const snapshot = completion.choices[0]?.message;\n        if (delta != null && snapshot?.role === 'assistant' && snapshot?.content) {\n            this._emit('content', delta, snapshot.content);\n        }\n    }, _ChatCompletionStream_endRequest = function _ChatCompletionStream_endRequest() {\n        if (this.ended) {\n            throw new OpenAIError(`stream has ended, this shouldn't happen`);\n        }\n        const snapshot = __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\n        if (!snapshot) {\n            throw new OpenAIError(`request ended without sending any chunks`);\n        }\n        __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, undefined, \"f\");\n        return finalizeChatCompletion(snapshot);\n    }, _ChatCompletionStream_accumulateChatCompletion = function _ChatCompletionStream_accumulateChatCompletion(chunk) {\n        var _a, _b, _c;\n        let snapshot = __classPrivateFieldGet(this, _ChatCompletionStream_currentChatCompletionSnapshot, \"f\");\n        const { choices, ...rest } = chunk;\n        if (!snapshot) {\n            snapshot = __classPrivateFieldSet(this, _ChatCompletionStream_currentChatCompletionSnapshot, {\n                ...rest,\n                choices: [],\n            }, \"f\");\n        }\n        else {\n            Object.assign(snapshot, rest);\n        }\n        for (const { delta, finish_reason, index, logprobs = null, ...other } of chunk.choices) {\n            let choice = snapshot.choices[index];\n            if (!choice) {\n                choice = snapshot.choices[index] = { finish_reason, index, message: {}, logprobs, ...other };\n            }\n            if (logprobs) {\n                if (!choice.logprobs) {\n                    choice.logprobs = Object.assign({}, logprobs);\n                }\n                else {\n                    const { content, ...rest } = logprobs;\n                    Object.assign(choice.logprobs, rest);\n                    if (content) {\n                        (_a = choice.logprobs).content ?? (_a.content = []);\n                        choice.logprobs.content.push(...content);\n                    }\n                }\n            }\n            if (finish_reason)\n                choice.finish_reason = finish_reason;\n            Object.assign(choice, other);\n            if (!delta)\n                continue; // Shouldn't happen; just in case.\n            const { content, function_call, role, tool_calls, ...rest } = delta;\n            Object.assign(choice.message, rest);\n            if (content)\n                choice.message.content = (choice.message.content || '') + content;\n            if (role)\n                choice.message.role = role;\n            if (function_call) {\n                if (!choice.message.function_call) {\n                    choice.message.function_call = function_call;\n                }\n                else {\n                    if (function_call.name)\n                        choice.message.function_call.name = function_call.name;\n                    if (function_call.arguments) {\n                        (_b = choice.message.function_call).arguments ?? (_b.arguments = '');\n                        choice.message.function_call.arguments += function_call.arguments;\n                    }\n                }\n            }\n            if (tool_calls) {\n                if (!choice.message.tool_calls)\n                    choice.message.tool_calls = [];\n                for (const { index, id, type, function: fn, ...rest } of tool_calls) {\n                    const tool_call = ((_c = choice.message.tool_calls)[index] ?? (_c[index] = {}));\n                    Object.assign(tool_call, rest);\n                    if (id)\n                        tool_call.id = id;\n                    if (type)\n                        tool_call.type = type;\n                    if (fn)\n                        tool_call.function ?? (tool_call.function = { arguments: '' });\n                    if (fn?.name)\n                        tool_call.function.name = fn.name;\n                    if (fn?.arguments)\n                        tool_call.function.arguments += fn.arguments;\n                }\n            }\n        }\n        return snapshot;\n    }, Symbol.asyncIterator)]() {\n        const pushQueue = [];\n        const readQueue = [];\n        let done = false;\n        this.on('chunk', (chunk) => {\n            const reader = readQueue.shift();\n            if (reader) {\n                reader.resolve(chunk);\n            }\n            else {\n                pushQueue.push(chunk);\n            }\n        });\n        this.on('end', () => {\n            done = true;\n            for (const reader of readQueue) {\n                reader.resolve(undefined);\n            }\n            readQueue.length = 0;\n        });\n        this.on('abort', (err) => {\n            done = true;\n            for (const reader of readQueue) {\n                reader.reject(err);\n            }\n            readQueue.length = 0;\n        });\n        this.on('error', (err) => {\n            done = true;\n            for (const reader of readQueue) {\n                reader.reject(err);\n            }\n            readQueue.length = 0;\n        });\n        return {\n            next: async () => {\n                if (!pushQueue.length) {\n                    if (done) {\n                        return { value: undefined, done: true };\n                    }\n                    return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk) => (chunk ? { value: chunk, done: false } : { value: undefined, done: true }));\n                }\n                const chunk = pushQueue.shift();\n                return { value: chunk, done: false };\n            },\n            return: async () => {\n                this.abort();\n                return { value: undefined, done: true };\n            },\n        };\n    }\n    toReadableStream() {\n        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);\n        return stream.toReadableStream();\n    }\n}\nfunction finalizeChatCompletion(snapshot) {\n    const { id, choices, created, model, system_fingerprint, ...rest } = snapshot;\n    return {\n        ...rest,\n        id,\n        choices: choices.map(({ message, finish_reason, index, logprobs, ...choiceRest }) => {\n            if (!finish_reason)\n                throw new OpenAIError(`missing finish_reason for choice ${index}`);\n            const { content = null, function_call, tool_calls, ...messageRest } = message;\n            const role = message.role; // this is what we expect; in theory it could be different which would make our types a slight lie but would be fine.\n            if (!role)\n                throw new OpenAIError(`missing role for choice ${index}`);\n            if (function_call) {\n                const { arguments: args, name } = function_call;\n                if (args == null)\n                    throw new OpenAIError(`missing function_call.arguments for choice ${index}`);\n                if (!name)\n                    throw new OpenAIError(`missing function_call.name for choice ${index}`);\n                return {\n                    ...choiceRest,\n                    message: { content, function_call: { arguments: args, name }, role },\n                    finish_reason,\n                    index,\n                    logprobs,\n                };\n            }\n            if (tool_calls) {\n                return {\n                    ...choiceRest,\n                    index,\n                    finish_reason,\n                    logprobs,\n                    message: {\n                        ...messageRest,\n                        role,\n                        content,\n                        tool_calls: tool_calls.map((tool_call, i) => {\n                            const { function: fn, type, id, ...toolRest } = tool_call;\n                            const { arguments: args, name, ...fnRest } = fn || {};\n                            if (id == null)\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].id\\n${str(snapshot)}`);\n                            if (type == null)\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].type\\n${str(snapshot)}`);\n                            if (name == null)\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].function.name\\n${str(snapshot)}`);\n                            if (args == null)\n                                throw new OpenAIError(`missing choices[${index}].tool_calls[${i}].function.arguments\\n${str(snapshot)}`);\n                            return { ...toolRest, id, type, function: { ...fnRest, name, arguments: args } };\n                        }),\n                    },\n                };\n            }\n            return {\n                ...choiceRest,\n                message: { ...messageRest, content, role },\n                finish_reason,\n                index,\n                logprobs,\n            };\n        }),\n        created,\n        model,\n        object: 'chat.completion',\n        ...(system_fingerprint ? { system_fingerprint } : {}),\n    };\n}\nfunction str(x) {\n    return JSON.stringify(x);\n}\n//# sourceMappingURL=ChatCompletionStream.mjs.map","export class ChatLog {\n  private conversation_log: { role: string; content: string }[]; // keeps track of previous conversation to send to GPT\n  private final_data: { role: string; content: string; time: number; keyPressLog?: any }[]; // keeps track of data to print\n  private prompt: string;\n\n  constructor() {\n    this.conversation_log = [];\n    this.final_data = [];\n  }\n\n  setPrompt(prompt) {\n    const time = Math.round(performance.now());\n\n    const newMessage = {\n      role: \"system\",\n      content: prompt,\n      time: time,\n    };\n\n    this.final_data.push(newMessage);\n    this.prompt = prompt;\n  }\n\n  getPrompt() {\n    const newElement = { role: \"system\", content: this.prompt };\n    const tempConversationLog = [...this.conversation_log, newElement];\n    return tempConversationLog;\n  }\n\n  getChatLogs() {\n    return this.final_data;\n  }\n\n  // updates current prompt, possibly replace to pass in objct\n  updateConversationLog(content, role, keyPressLog?, message?): void {\n    if (role === \"system\")\n      console.log(\n        \"WARNING: this case is not caught and is incorrectly trigerring outadated method\",\n        \"content:\",\n        content,\n        \"role:\",\n        role\n      );\n\n    const time = Math.round(performance.now());\n    const newPrompt = { role: role, content: content };\n    this.conversation_log.push(newPrompt);\n\n    const newMessage = {\n      role: role,\n      content: content,\n      time: time,\n      ...(message ? { message: message } : {}),\n      ...(keyPressLog ? { keyPressLog: keyPressLog } : {}),\n    };\n    this.final_data.push(newMessage);\n  }\n\n  // logMessage adds message to final data but not conversatin log\n  logMessage(message, role) {\n    const time = Math.round(performance.now());\n\n    const newMessage = {\n      role: role,\n      content: message,\n      time: time,\n    };\n    this.final_data.push(newMessage);\n  }\n\n  // Chain Condition -- have it be a list of the chain and what happens before and after\n  // called when temporary chainPrompting\n  cleanConversation(): {}[] {\n    const res = this.conversation_log.filter((message: any, index: number, array: any[]) => {\n      if (\"role\" in message && message[\"role\"] === \"system\") {\n        return false;\n      }\n      // Exclude the last message because will be user message - only want existing conversation\n      if (index === array.length - 1) {\n        return false;\n      }\n      return true;\n    });\n\n    return res;\n  }\n\n  // call when adding a new prompt\n  cleanSystem(prompt, message?) {\n    // cleans existing prompts\n    const res = this.conversation_log.filter((message: any) => {\n      if (\"role\" in message && message[\"role\"] === \"system\") {\n        return false;\n      }\n      return true;\n    });\n\n    this.conversation_log = res;\n\n    this.setPrompt(prompt);\n    return this.getPrompt();\n  }\n}\n","import { JsPsych, JsPsychPlugin, ParameterType, TrialType } from \"jspsych\";\nimport { ChatCompletionStream } from \"openai/lib/ChatCompletionStream\";\n\nimport { ChatLog } from \"./ChatLog\";\n\nconst info = <const>{\n  name: \"chat\",\n  parameters: {\n    // BOOL, STRING, INT, FLOAT, FUNCTION, KEY, KEYS, SELECT, HTML_STRING, IMAGE, AUDIO, VIDEO, OBJECT, COMPLEX\n    ai_prompt: {\n      type: ParameterType.STRING,\n      default: undefined,\n    },\n    ai_model: {\n      type: ParameterType.STRING,\n      default: \"gpt-4o\",\n    },\n    chat_field_placeholder: {\n      type: ParameterType.STRING,\n      default: \"Type your message here...\",\n    },\n    // bot_name: {\n    //   type: ParameterType.STRING,\n    //   default: undefined,\n    // },\n    continue_button: {\n      type: ParameterType.COMPLEX,\n      default: { message_trigger: 0 },\n      nested: {\n        timer_trigger: {\n          type: ParameterType.INT,\n        },\n        message_trigger: {\n          type: ParameterType.INT,\n        },\n        message: {\n          type: ParameterType.STRING,\n        },\n      },\n    },\n    additional_prompts: {\n      type: ParameterType.COMPLEX,\n      array: true,\n      default: undefined,\n      nested: {\n        message: {\n          // messages to display on screen\n          type: ParameterType.STRING,\n          default: \"\",\n        },\n        prompt: {\n          // prompting to pass in\n          type: ParameterType.STRING,\n          default: null,\n        },\n        role: {\n          // \"prompt\" (\"system-prompt\"), \"chatbot-message\",\"chatbot-prompt\"\n          type: ParameterType.STRING,\n          default: \"system-prompt\",\n        },\n        message_trigger: {\n          type: ParameterType.INT,\n          default: null,\n        },\n        timer_trigger: {\n          type: ParameterType.INT,\n          default: null,\n        },\n      },\n    },\n    // when triggers it doesn't stop, do we want to give it a stop?\n    prompt_chain: {\n      type: ParameterType.COMPLEX,\n      default: [],\n      nested: {\n        prompts: {\n          type: ParameterType.STRING,\n          array: true,\n          default: [],\n        },\n        message_trigger: {\n          type: ParameterType.INT,\n          default: 99999999999999999999999, // silencing error message\n        },\n        timer_trigger: {\n          type: ParameterType.INT,\n          default: null,\n        },\n      },\n    },\n    selection_prompt: {\n      type: ParameterType.COMPLEX,\n      default: {},\n      nested: {\n        prompts: {\n          type: ParameterType.STRING,\n          array: true,\n          default: [],\n        },\n        selection_prompt: {\n          type: ParameterType.STRING,\n          default: \"Select one of these prompts:\",\n        },\n        message_trigger: {\n          type: ParameterType.INT,\n          default: 99999999999999999999999, // silencing error message\n        },\n        timer_trigger: {\n          type: ParameterType.INT,\n          default: null,\n        },\n      },\n    },\n  },\n};\n\ntype Info = typeof info;\n\n/**\n * **chat**\n *\n * Chat interface for running experiments using LLMs\n *\n * @author Victor Zhang and Niranjan Baskaran\n * @see {@link https://github.com/jspsych/jspsych-contrib/packages/plugin-chat/README.md}}\n */\nclass ChatPlugin implements JsPsychPlugin<Info> {\n  static info = info;\n  private researcher_prompts: {}[]; // keeps track of researcher's prompts that need to be displayed\n  private prompt_chain: {};\n  private selection_prompt: {};\n  private messages_sent: number; // notes number of messages sent to calculate prompts\n  private timer_start: number; // notes beginning of session in order to calculate prompts\n  private ai_model: string; // keeps track of model\n  private chatLog: ChatLog;\n\n  constructor(private jsPsych: JsPsych) {}\n\n  trial(display_element: HTMLElement, trial: TrialType<Info>) {\n    this.initializeTrialVariables(trial);\n    // var botTitle = trial.bot_name\n    //   ? `<div class=\"bot-title\">\n    //   <h1 class=\"bot-title-text\">` +\n    //     trial.bot_name +\n    //     `</h1>\n    // </div>`\n    //   : \"\";\n\n    var html =\n      `<div class=\"chat-page\">` +\n      // botTitle +\n      `<div class=\"chat-container\">\n        <div class=\"chat-box\" id=\"chat-box\"></div>\n\n        <div class=\"chat-fields\"> \n          <textarea type=\"text\" id=\"user-input\" placeholder=\"` +\n      trial.chat_field_placeholder +\n      `\"></textarea>\n          <button id=\"send-btn\">Send</button>\n          <button id=\"continue-btn\" style=\"display: none;\">Continue</button>\n        </div>\n      </div>\n    </div>`;\n\n    display_element.innerHTML = html;\n    document.body.style.backgroundColor = \"#9c9ad05c\";\n    const chatBox = display_element.querySelector(\"#chat-box\") as HTMLElement;\n    const userInput = display_element.querySelector(\"#user-input\") as HTMLInputElement;\n    const sendButton = display_element.querySelector(\"#send-btn\") as HTMLButtonElement;\n    const continueButton = display_element.querySelector(\"#continue-btn\") as HTMLButtonElement;\n    var keyPressLog = [];\n\n    // Setting up Trial Logic\n    // Function to handle logic of sending user message, and data collection\n    const sendMessage = async () => {\n      const message = userInput.value.trim();\n      this.addMessage(\"user\", message, chatBox, (keyPressLog = keyPressLog));\n      keyPressLog = [];\n      userInput.value = \"\";\n\n      // prompt chaining or simple requests\n      if (message !== \"\" && this.selection_prompt && this.checkCondition(\"selection_prompt\"))\n        await this.selectionPrompt(message, chatBox);\n      else if (message !== \"\" && this.prompt_chain && this.checkCondition(\"prompt_chain\")) {\n        await this.chainPrompts(message, chatBox);\n      } else if (message !== \"\") {\n        await this.updateAndProcessGPT(chatBox);\n      }\n\n      chatBox.scrollTop = chatBox.scrollHeight;\n      // inc messages and check researcher prompts\n      this.messages_sent += 1;\n      this.checkResearcherPrompts(chatBox, continueButton);\n    };\n\n    // Event listener for send button click\n    sendButton.addEventListener(\"click\", function (event) {\n      if (userInput.value.trim() != \"\") {\n        sendMessage();\n      }\n    });\n\n    // Event listener for Enter key press\n    userInput.addEventListener(\"keydown\", function (event) {\n      if (event.key === \"Enter\") {\n        if (!event.shiftKey) {\n          event.preventDefault(); // Prevent default behavior of adding new line\n          sendMessage();\n        }\n      }\n    });\n\n    // Event listener for all keypresses on userInput\n    userInput.addEventListener(\"keydown\", function (event) {\n      keyPressLog.push(event.key);\n    });\n\n    continueButton.addEventListener(\"click\", () => {\n      this.jsPsych.finishTrial({\n        logs: this.chatLog.getChatLogs(),\n      });\n    });\n\n    // Setting up Trial\n    this.checkResearcherPrompts(chatBox, continueButton);\n  }\n\n  // includes error checking to minimize error checking later\n  initializeTrialVariables(trial: TrialType<Info>) {\n    this.timer_start = performance.now();\n    this.chatLog = new ChatLog();\n    this.messages_sent = 0;\n    this.ai_model = trial.ai_model;\n\n    // this.chatLog.updateConversationLog(trial.ai_prompt, \"system\");\n    this.chatLog.setPrompt(trial.ai_prompt); // sets researcher prompts and removes any that can't trigger\n\n    this.researcher_prompts = trial.additional_prompts\n      ? trial.additional_prompts.filter((researcher_prompt) => {\n          if (\n            researcher_prompt[\"message_trigger\"] === null &&\n            researcher_prompt[\"timer_trigger\"] === null\n          ) {\n            console.error(\"Missing required property in researcher prompt:\", researcher_prompt);\n            return false;\n          }\n          return true;\n        })\n      : [];\n\n    // sets continue button and removes any that can't trigger\n    const continue_button = trial.continue_button;\n    if (continue_button[\"message_trigger\"] === null && continue_button[\"timer_trigger\"] === null) {\n      console.error(\"Missing required trigger property in continue prompt, will never display\");\n    } else {\n      continue_button[\"role\"] = \"continue\";\n      this.researcher_prompts.push(continue_button);\n    }\n\n    // sets prompt chain and removes any that can't trigger\n    if (\n      trial.prompt_chain &&\n      trial.prompt_chain[\"message_trigger\"] === null &&\n      trial.prompt_chain[\"timer_trigger\"] === null\n    ) {\n      console.error(\"Missing required trigger property in prompt_chain, will never trigger\");\n    } else {\n      this.prompt_chain = trial.prompt_chain;\n    }\n\n    if (\n      trial.selection_prompt &&\n      trial.selection_prompt[\"message_trigger\"] === null &&\n      trial.selection_prompt[\"timer_trigger\"] === null\n    ) {\n      console.error(\"Missing required trigger property in selection_prompt, will never trigger\");\n    } else {\n      this.selection_prompt = trial.selection_prompt;\n    }\n  }\n\n  // Call to backend, newMessage is the document item to print (optional because when chaining don't want them to display)\n  async fetchGPT(messages, chatBox, newMessage?) {\n    try {\n      var response;\n      if (window.location.href.includes(\"127.0.0.1\")) {\n        // local chat vs hosting\n        response = await fetch(\"http://localhost:3000/api/chat\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ messages, ai_model: this.ai_model }), // Corrected JSON structure\n        });\n      } else {\n        response = await fetch(\"/api/chat\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ messages, ai_model: this.ai_model }), // Corrected JSON structure\n        });\n      }\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const runner = ChatCompletionStream.fromReadableStream(response.body);\n\n      if (newMessage) {\n        // prints to screen if specified, otherwise only fetch\n        runner.on(\"content\", (delta, snapshot) => {\n          newMessage.innerHTML += delta.replace(/\\n/g, \"<br>\");\n          chatBox.scrollTop = chatBox.scrollHeight;\n        });\n      }\n\n      await runner.finalChatCompletion(); // waits before returning the actual content\n      return runner[\"messages\"][0][\"content\"];\n    } catch (error) {\n      console.error(\"Error fetching GPT data:\", error);\n      throw error; // Rethrow the error after logging it\n    }\n  }\n\n  // Handles updates to system with the prompt and to the screen\n  addMessage(role, message, chatBox, keyPressLog?) {\n    const newMessage = document.createElement(\"div\");\n    // Handles logic of updating prompts and error checking\n    switch (role) {\n      case \"chatbot\": // writing to screen handled caller function\n        this.chatLog.updateConversationLog(message, \"assistant\");\n        return;\n      case \"user\":\n        this.chatLog.updateConversationLog(message, \"user\", keyPressLog);\n        break;\n      case \"chatbot-message\": // set by researcher, needs be seperate case because doesn't update prompts\n        role = \"chatbot\";\n        this.chatLog.logMessage(message, role);\n        break;\n      case \"system-prompt\": // set by researcher\n        this.chatLog.logMessage(message, role);\n        break;\n      case \"chatbot-prompt\": // logging already handled by \"cleanSystem\"\n        role = \"system-prompt\";\n        break;\n      default:\n        console.error(\"Incorrect role\");\n        return;\n    }\n\n    newMessage.className = role + \"-message\";\n    newMessage.innerHTML = \"\";\n    chatBox.appendChild(newMessage);\n    newMessage.innerHTML = message.replace(/\\n/g, \"<br>\");\n    chatBox.scrollTop = chatBox.scrollHeight;\n  }\n\n  // updates and processes to the screen, workflow for one message (can be used in the process of workflow for mulitple messages)\n  async updateAndProcessGPT(chatBox, prompt?) {\n    const newMessage = document.createElement(\"div\");\n    newMessage.className = \"chatbot\" + \"-message\";\n    newMessage.innerHTML = \"\";\n    chatBox.appendChild(newMessage);\n\n    try {\n      var response = undefined;\n\n      if (prompt) {\n        // allows to pass in non defined prompts\n        response = await this.fetchGPT(prompt, chatBox, newMessage);\n        console.log(prompt);\n      } else {\n        // special case when wanting to prompt with own thing\n        response = await this.fetchGPT(this.chatLog.getPrompt(), chatBox, newMessage);\n        console.log(this.chatLog.getPrompt());\n      }\n\n      chatBox.scrollTop = chatBox.scrollHeight;\n      this.addMessage(\"chatbot\", response, chatBox); // saves to prompt\n      return response;\n    } catch (error) {\n      newMessage.innerHTML = \"error fetching bot response\";\n      return \"error fetching response\";\n    }\n  }\n\n  // logic for triggering logic\n  checkResearcherPrompts(chatBox, continueButton): void {\n    this.researcher_prompts = this.researcher_prompts.filter((researcher_prompt) => {\n      const message_trigger = researcher_prompt[\"message_trigger\"];\n      const timer_trigger = researcher_prompt[\"timer_trigger\"];\n      const time_elapsed = performance.now() - this.timer_start; // could instead keep subtracting from time_elapsed\n\n      if (\n        (message_trigger !== null && this.messages_sent >= message_trigger) ||\n        (timer_trigger !== null && time_elapsed >= timer_trigger)\n      ) {\n        // Checking with prompt to trigger\n        switch (researcher_prompt[\"role\"]) {\n          case \"chatbot-message\": // case is needed because of chatbot updating prompt\n          case \"system-prompt\": // want these cases to have the same functionality\n            this.addMessage(researcher_prompt[\"role\"], researcher_prompt[\"message\"], chatBox);\n            break;\n          case \"chatbot-prompt\": // checks messages, updates prompt and prints sytem message if exists\n            const prompt = researcher_prompt[\"prompt\"];\n            const message = researcher_prompt[\"message\"];\n\n            if (prompt !== null && typeof prompt === \"string\") {\n              this.chatLog.cleanSystem(prompt, message);\n            } else\n              console.error(\n                researcher_prompt,\n                \"is missing prompt field or it isn't in the correct format\"\n              );\n\n            if (message !== null && typeof prompt === \"string\" && message !== \"\") {\n              this.addMessage(researcher_prompt[\"role\"], message, chatBox);\n            }\n            break;\n          case \"continue\": // displays continue button, error checking that pipelining is working\n            if (!continueButton) {\n              console.error(\"No continue button to display\");\n              return false;\n            }\n            continueButton.style.display = \"block\";\n            // implement check here\n            this.addMessage(\"system-prompt\", researcher_prompt[\"message\"], chatBox);\n            break;\n          default:\n            console.error(\"Incorrect role for prompting\");\n        }\n\n        return false; // Remove this item from the array\n      }\n      return true; // Keep this item in the array\n    });\n  }\n\n  // checking whether chain prompts can trigger\n  private checkCondition(name) {\n    const time_elapsed = performance.now() - this.timer_start; // could instead keep subtracting from time_elapsed\n    const message_trigger = this[name][\"message_trigger\"];\n    const timer_trigger = this[name][\"timer_trigger\"];\n\n    if (\n      (message_trigger !== null && this.messages_sent >= message_trigger) ||\n      (timer_trigger !== null && time_elapsed >= timer_trigger)\n    )\n      return true;\n    else return false;\n  }\n\n  // triggering prompts in chain and prompting/logging logic\n  private async chainPrompts(message, chatBox) {\n    const cleaned_prompt = this.chatLog.cleanConversation();\n    const logChain = [];\n\n    for (let i = 0; i < this.prompt_chain[\"prompts\"].length; i++) {\n      const chain_prompt_system = this.prompt_chain[\"prompts\"][i];\n\n      const temp_prompt = [\n        ...cleaned_prompt,\n        {\n          role: \"system\",\n          content: chain_prompt_system,\n        },\n        {\n          role: \"user\",\n          content: message,\n        },\n      ];\n\n      logChain.push(\n        {\n          role: `chain-system-${i}`,\n          content: chain_prompt_system,\n        },\n        {\n          role: `link-response-${i}`,\n          content: message,\n        }\n      );\n\n      if (i === this.prompt_chain[\"prompts\"].length - 1) {\n        message = await this.updateAndProcessGPT(chatBox, temp_prompt);\n        logChain.push({ role: \"assistant\", content: message });\n      } else {\n        message = await this.fetchGPT(temp_prompt, chatBox); // Ensure to await if fetchGPT is asynchronous\n      }\n    }\n\n    this.chatLog.logMessage(logChain, \"chain-prompt\");\n  }\n\n  private async selectionPrompt(message, chatBox) {\n    const cleaned_prompt = this.chatLog.cleanConversation(); // maybe be able to refactor and cleanSystem()\n    var bot_responses = \"\";\n\n    for (var i = 0; i < this.selection_prompt[\"prompts\"].length; i++) {\n      const input_prompt = this.selection_prompt[\"prompts\"][i];\n      const combined_prompt = [\n        ...cleaned_prompt,\n        { role: \"system\", content: input_prompt },\n        { role: \"user\", content: message },\n      ];\n\n      console.log(\"individual_prompt:\", combined_prompt);\n      const response = await this.fetchGPT(combined_prompt, chatBox);\n\n      bot_responses = bot_responses + \"(\" + i + \") \" + response + \"\\n\\n\";\n    }\n\n    const system_user =\n      this.selection_prompt[\"selection_prompt\"] +\n      \"Task: You should select one of the three possible responses that would best achieve your goal with the intention of outputting it to the user\" +\n      \"What you should output: You should output the choice that you have selected, but without any indication that this was a numbered choice. Do not tell the user that you selected a certain response. The user should not know that there were choices.\" +\n      \" User message: `\" +\n      message +\n      \"`\";\n\n    this.chatLog.logMessage(\n      [\n        { role: \"prompt-selection\", content: system_user },\n        { role: \"content-choices/chatbot-answers\", content: bot_responses },\n      ],\n      \"selection_prompt\"\n    );\n\n    const prompt_select = [\n      ...cleaned_prompt,\n      { role: \"system\", content: system_user },\n      { role: \"user\", content: bot_responses },\n    ];\n\n    const response_message = await this.updateAndProcessGPT(chatBox, prompt_select);\n  }\n}\n\nexport default ChatPlugin;\n"],"names":["ReadableStream","shims.kind","shims.setShims","auto.getRuntime","this","__classPrivateFieldSet","__classPrivateFieldGet","ParameterType"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}